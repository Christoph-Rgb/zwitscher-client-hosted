{"version":3,"sources":["app.js","environment.js","home.js","main.js","resources/index.js","services/async-http-client.js","services/fixtures.js","services/messages.js","services/zwitscher-service.js","viewmodels/dashboard/dashboard.js","viewmodels/globalTimeline/globalTimeline.js","viewmodels/login/login.js","viewmodels/logout/logout.js","viewmodels/postTweet/postTweet.js","viewmodels/reload/reload.js","viewmodels/settings/settings.js","viewmodels/signup/signup.js","viewmodels/socialGraph/socialGraph.js","viewmodels/timeline/timeline.js","viewmodels/user/user.js","viewmodels/userTimeline/userTimeline.js","viewmodels/users/users.js","/Users/Pius/repos/MW/zwitscher-client/src/app.html","/Users/Pius/repos/MW/zwitscher-client/src/home.html","/Users/Pius/repos/MW/zwitscher-client/src/nav-bar.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/dashboard/dashboard.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/globalTimeline/globalTimeline.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/logout/logout.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/login/login.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/settings/settings.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/signup/signup.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/postTweet/postTweet.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/socialGraph/socialGraph.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/userTimeline/userTimeline.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/reload/reload.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/users/users.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/timeline/timeline.html","/Users/Pius/repos/MW/zwitscher-client/src/viewmodels/user/user.html"],"names":["App","zs","au","ea","zwitscherService","subscribe","msg","status","success","router","navigate","replace","trigger","reset","deactivate","setRoot","then","navigateToRoute","attached","isAuthenticated","configureRouter","config","map","route","name","moduleId","nav","title","mapUnknownRoutes","debug","testing","Home","aurelia","href","configure","Promise","longStackTraces","warnings","wForgottenReturn","use","standardConfiguration","feature","developmentLogging","plugin","start","AsyncHttpClient","httpClient","fixtures","http","withBaseUrl","baseUrl","get","url","resolve","reject","result","catch","err","statusCode","message","clearAuthentication","publish","post","obj","delete","login","user","authenticate","successStatus","errorStatus","response","content","localStorage","zwitscher","JSON","stringify","configuration","withHeader","token","authenticated","undefined","auth","parse","Fixtures","LoginStatus","TweetUpdate","TriggerLoggedInUserUpdate","CompletedLoggedInUserUpdate","UsersChanged","ZwitscherService","ac","loggedInUser","getUser","_id","refreshedUser","console","log","getLoggedInUser","userID","getUsers","users","register","firstName","lastName","email","password","gender","newUser","res","logout","reAuhtenticate","getTweetsForUser","tweets","getTweetsByUser","deleteTweet","tweetToDeleteID","deleteMultipleTweets","tweetsToDelete","postTweet","tweet","unfollowUser","followUser","updateUser","updatedUser","removeUser","Dashboard","timelineOptions","eventAgregator","src","viewedUserID","GlobalTimeline","Login","prompt","initializeFormValidation","bind","$","on","addClass","onSuccessFunction","onFailureFunction","form","inline","onSuccess","event","preventDefault","onFailure","fields","identifier","rules","type","Logout","PostTweet","tweetMessage","tweetImage","errorMessage","eventSubscriptions","push","initilizeUploadForm","reinitializeUploadForm","detached","forEach","dispose","length","size","show","getBase64","image","base64EncodedImage","hideErrorMessage","removeClass","attr","file","reader","FileReader","onload","binaryString","readerEvent","target","base64String","btoa","onerror","readAsBinaryString","e","parents","click","input","$preview","files","readAsDataURL","removeAttr","$control","control","replaceWith","val","clone","Reload","activate","window","history","back","Settings","refreshUser","update","oldPassword","passwordConfirm","optional","Signup","d3","SocialGraph","graph","refresh","select","remove","nodes","profilePicture","follows","links","followedUser","initializeGraph","width","height","svg","append","simulation","forceSimulation","force","forceLink","id","d","forceManyBody","forceCollide","forceCenter","link","selectAll","data","enter","Math","sqrt","value","style","gnodes","classed","call","drag","dragstarted","dragged","dragended","labels","text","ticked","source","x","y","active","alphaTarget","restart","fx","fy","Timeline","timelineUser","timelineUserID","bulkDeleteActive","foundUser","refreshTimeline","indexToRemove","findIndex","splice","checkedForDelete","showOrHideEditItems","deleteAllUserTweets","getTweetFunctionName","sort","tweet1","tweet2","posted1","Date","posted","posted2","getTime","postedString","toLocaleString","canDelete","scope","User","viewedUser","removedID","indexOf","joinedString","joined","getFullYear","canFollow","indexOfFollowing","followedUserID","isFollowing","goToTimeline","UserTimeline","payload","refreshUsers","foundUsers"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;MAMaA,cAAAA,cADZ;AAGC,iBAAYC,EAAZ,EAAgBC,EAAhB,EAAoBC,EAApB,EAAwB;AAAA;;AAAA;;AACtB,WAAKD,EAAL,GAAUA,EAAV;AACA,WAAKE,gBAAL,GAAwBH,EAAxB;AACAE,SAAGE,SAAH,wBAA0B,eAAO;AAC/B,YAAIC,IAAIC,MAAJ,CAAWC,OAAX,KAAuB,IAA3B,EAAiC;AAG/B,gBAAKC,MAAL,CAAYC,QAAZ,CAAqB,GAArB,EAA0B,EAAEC,SAAS,IAAX,EAAiBC,SAAS,KAA1B,EAA1B;AACA,gBAAKH,MAAL,CAAYI,KAAZ;AACA,gBAAKJ,MAAL,CAAYK,UAAZ;AACAZ,aAAGa,OAAH,CAAW,MAAX,EAAmBC,IAAnB,CAAwB,YAAM;AAC5B,kBAAKP,MAAL,CAAYQ,eAAZ,CAA4B,gBAA5B;AACD,WAFD;AAGD,SATD,MASO;AACL,gBAAKR,MAAL,CAAYC,QAAZ,CAAqB,GAArB,EAA0B,EAAEC,SAAS,IAAX,EAAiBC,SAAS,KAA1B,EAA1B;AACA,gBAAKH,MAAL,CAAYI,KAAZ;AACA,gBAAKJ,MAAL,CAAYK,UAAZ;AACAZ,aAAGa,OAAH,CAAW,KAAX,EAAkBC,IAAlB,CAAuB,YAAM;AAC3B,kBAAKP,MAAL,CAAYQ,eAAZ,CAA4B,OAA5B;AACD,WAFD;AAGD;AACF,OAlBD;AAmBD;;kBAEDC,+BAAW;AAAA;;AACT,UAAI,KAAKd,gBAAL,CAAsBe,eAAtB,EAAJ,EAA6C;AAC3C,aAAKjB,EAAL,CAAQa,OAAR,CAAgB,MAAhB,EAAwBC,IAAxB,CAA6B,YAAM;AACjC,iBAAKP,MAAL,CAAYQ,eAAZ,CAA4B,gBAA5B;AACD,SAFD;AAGD;AACF;;kBAEDG,2CAAgBC,QAAQZ,QAAQ;AAC9BY,aAAOC,GAAP,CAAW,CACT,EAAEC,OAAO,CAAC,EAAD,EAAK,OAAL,CAAT,EAAwBC,MAAM,OAA9B,EAAuCC,UAAU,wBAAjD,EAA2EC,KAAK,IAAhF,EAAsFC,OAAO,OAA7F,EADS,EAET,EAAEJ,OAAO,QAAT,EAAmBC,MAAM,QAAzB,EAAmCC,UAAU,0BAA7C,EAAyEC,KAAK,IAA9E,EAAoFC,OAAO,QAA3F,EAFS,CAAX;;AAKAN,aAAOO,gBAAP,CAAwB,uBAAe;AACrC,eAAO,OAAP;AACD,OAFD;;AAIA,WAAKnB,MAAL,GAAcA,MAAd;AACD;;;;;;;;;;;oBCnDY;AACboB,WAAO,IADM;AAEbC,aAAS;AAFI;;;;;;;;;;;;;;;;;;MCGFC,eAAAA,eADZ;AAGC,kBAAY7B,EAAZ,EAAgB;AAAA;;AACd,WAAK8B,OAAL,GAAe9B,EAAf;AACD;;mBAEDkB,2CAAgBC,QAAQZ,QAAQ;AAC9BY,aAAOC,GAAP,CAAW,CACT,EAAEC,OAAO,CAAC,EAAD,EAAK,gBAAL,CAAT,EAAiCC,MAAM,gBAAvC,EAAyDC,UAAU,0CAAnE,EAA+GC,KAAK,IAApH,EAA0HC,OAAO,iBAAjI,EADS,EAET,EAAEJ,OAAO,mBAAT,EAA8BC,MAAM,cAApC,EAAoDC,UAAU,sCAA9D,EAAsGC,KAAK,IAA3G,EAAiHC,OAAO,eAAxH,EAAyIM,MAAM,gBAA/I,EAFS,EAIT,EAAEV,OAAO,OAAT,EAAkBC,MAAM,OAAxB,EAAiCC,UAAU,wBAA3C,EAAqEC,KAAK,IAA1E,EAAgFC,OAAO,OAAvF,EAJS,EAKT,EAAEJ,OAAO,aAAT,EAAwBC,MAAM,aAA9B,EAA6CC,UAAU,oCAAvD,EAA6FC,KAAK,IAAlG,EAAwGC,OAAO,cAA/G,EALS,EAMT,EAAEJ,OAAO,WAAT,EAAsBC,MAAM,WAA5B,EAAyCC,UAAU,gCAAnD,EAAqFC,KAAK,IAA1F,EAAgGC,OAAO,WAAvG,EANS,EAOT,EAAEJ,OAAO,UAAT,EAAqBC,MAAM,UAA3B,EAAuCC,UAAU,8BAAjD,EAAiFC,KAAK,IAAtF,EAA4FC,OAAO,UAAnG,EAPS,EAQT,EAAEJ,OAAO,QAAT,EAAmBC,MAAM,QAAzB,EAAmCC,UAAU,0BAA7C,EAAyEC,KAAK,IAA9E,EAAoFC,OAAO,QAA3F,EARS,EAST,EAAEJ,OAAO,QAAT,EAAmBC,MAAM,QAAzB,EAAmCC,UAAU,0BAA7C,EATS,CAAX;;AAYAJ,aAAOO,gBAAP,CAAwB,uBAAe;AACrC,eAAO,gBAAP;AACD,OAFD;;AAIA,WAAKnB,MAAL,GAAcA,MAAd;AACD;;;;;;;;;;;UCjBayB,YAAAA;;;;;;;;;;AAPhBC,UAAQd,MAAR,CAAe;AACbe,qBAAiB,sBAAYP,KADhB;AAEbQ,cAAU;AACRC,wBAAkB;AADV;AAFG,GAAf;;AAOO,WAASJ,SAAT,CAAmBF,OAAnB,EAA4B;AACjCA,YAAQO,GAAR,CACGC,qBADH,GAEGC,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAYZ,KAAhB,EAAuB;AACrBG,cAAQO,GAAR,CAAYG,kBAAZ;AACD;;AAED,QAAI,sBAAYZ,OAAhB,EAAyB;AACvBE,cAAQO,GAAR,CAAYI,MAAZ,CAAmB,iBAAnB;AACD;;AAEDX,YAAQY,KAAR,GAAgB5B,IAAhB,CAAqB;AAAA,aAAMgB,QAAQjB,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;UCxBemB,YAAAA;AAAT,WAASA,SAAT,CAAmBb,MAAnB,EAA2B,CAEjC;;;;;;;;;;;;;;;;;;;;;;;;;;MCKoBwB,0BADpB;AAGC,6BAAYC,UAAZ,EAAwBC,QAAxB,EAAkC5C,EAAlC,EAAsC;AAAA;;AACpC,WAAK6C,IAAL,GAAYF,UAAZ;AACA,WAAKE,IAAL,CAAUd,SAAV,CAAoB,gBAAQ;AAC1Bc,aAAKC,WAAL,CAAiBF,SAASG,OAA1B;AACD,OAFD;AAGA,WAAK/C,EAAL,GAAUA,EAAV;AACD;;8BAEDgD,mBAAIC,KAAK;AAAA;;AACP,aAAO,IAAIjB,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,cAAKN,IAAL,CAAUG,GAAV,CAAcC,GAAd,EAAmBpC,IAAnB,CAAwB,kBAAU;AAChCqC,kBAAQE,MAAR;AACD,SAFD,EAEGC,KAFH,CAES,eAAO;AACd,cAAIC,IAAIC,UAAJ,KAAmB,GAAvB,EAA2B;AACzB,gBAAMnD,SAAS;AACbC,uBAAS,KADI;AAEbmD,uBAAS;AAFI,aAAf;AAIA,kBAAKC,mBAAL;AACA,kBAAKzD,EAAL,CAAQ0D,OAAR,CAAgB,0BAAgBtD,MAAhB,CAAhB;AACD;AACD+C,iBAAOG,GAAP;AACD,SAZD;AAaD,OAdM,CAAP;AAeD;;8BAEDK,qBAAKV,KAAKW,KAAK;AAAA;;AACb,aAAO,IAAI5B,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKN,IAAL,CAAUc,IAAV,CAAeV,GAAf,EAAoBW,GAApB,EAAyB/C,IAAzB,CAA8B,kBAAU;AACtCqC,kBAAQE,MAAR;AACD,SAFD,EAEGC,KAFH,CAES,eAAO;AACd,cAAIC,IAAIC,UAAJ,KAAmB,GAAvB,EAA2B;AACzB,gBAAMnD,SAAS;AACbC,uBAAS,KADI;AAEbmD,uBAAS;AAFI,aAAf;AAIA,mBAAKC,mBAAL;AACA,mBAAKzD,EAAL,CAAQ0D,OAAR,CAAgB,0BAAgBtD,MAAhB,CAAhB;AACD;AACD+C,iBAAOG,GAAP;AACD,SAZD;AAaD,OAdM,CAAP;AAeD;;8BAEDO,0BAAOZ,KAAK;AAAA;;AACV,aAAO,IAAIjB,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKN,IAAL,CAAUgB,MAAV,CAAiBZ,GAAjB,EAAsBpC,IAAtB,CAA2B,kBAAU;AACnCqC,kBAAQE,MAAR;AACD,SAFD,EAEGC,KAFH,CAES,eAAO;AACd,cAAIC,IAAIC,UAAJ,KAAmB,GAAvB,EAA2B;AACzB,gBAAMnD,SAAS;AACbC,uBAAS,KADI;AAEbmD,uBAAS;AAFI,aAAf;AAIA,mBAAKC,mBAAL;AACA,mBAAKzD,EAAL,CAAQ0D,OAAR,CAAgB,0BAAgBtD,MAAhB,CAAhB;AACD;AACD+C,iBAAOG,GAAP;AACD,SAZD;AAaD,OAdM,CAAP;AAeD;;8BAEDQ,uBAAMb,KAAKc,MAAM;AAAA;;AACf,WAAKC,YAAL,CAAkBf,GAAlB,EAAuBc,IAAvB,EAA6BlD,IAA7B,CAAkC,yBAAiB;AACjD,eAAKb,EAAL,CAAQ0D,OAAR,CAAgB,0BAAgBO,aAAhB,CAAhB;AACD,OAFD,EAEGZ,KAFH,CAES,uBAAe;AACtB,eAAKrD,EAAL,CAAQ0D,OAAR,CAAgB,0BAAgBQ,WAAhB,CAAhB;AACD,OAJD;AAKD;;8BACDF,qCAAaf,KAAKc,MAAM;AAAA;;AACtB,aAAO,IAAI/B,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKN,IAAL,CAAUc,IAAV,CAAeV,GAAf,EAAoBc,IAApB,EAA0BlD,IAA1B,CAA+B,oBAAY;AACzC,cAAMT,SAAS+D,SAASC,OAAxB;AACA,cAAIhE,OAAOC,OAAX,EAAoB;AAClBgE,yBAAaC,SAAb,GAAyBC,KAAKC,SAAL,CAAeL,SAASC,OAAxB,CAAzB;AACA,mBAAKvB,IAAL,CAAUd,SAAV,CAAoB,yBAAiB;AACnC0C,4BAAcC,UAAd,CAAyB,eAAzB,EAA0C,YAAYP,SAASC,OAAT,CAAiBO,KAAvE;AACD,aAFD;AAGD;AACDzB,kBAAQ9C,MAAR;AACD,SATD,EASGiD,KATH,CASS,iBAAS;AAChB,cAAMjD,SAAS;AACbC,qBAAS,KADI;AAEbmD,qBAAS;AAFI,WAAf;AAIAL,iBAAO/C,MAAP;AACD,SAfD;AAgBD,OAjBM,CAAP;AAkBD;;8BAEDqD,qDAAsB;AACpBY,mBAAaC,SAAb,GAAyB,IAAzB;AACA,WAAKzB,IAAL,CAAUd,SAAV,CAAoB,yBAAiB;AACnC0C,sBAAcC,UAAd,CAAyB,eAAzB,EAA0C,EAA1C;AACD,OAFD;AAGD;;8BAED1D,6CAAkB;AAAA;;AAEhB,UAAI4D,gBAAgB,KAApB;AACA,UAAIP,aAAaC,SAAb,KAA2B,MAA3B,IAAqCD,aAAaC,SAAb,KAA2BO,SAApE,EAA+E;AAC7ED,wBAAgB,IAAhB;AACA,aAAK/B,IAAL,CAAUd,SAAV,CAAoB,gBAAQ;AAC1B,cAAM+C,OAAOP,KAAKQ,KAAL,CAAWV,aAAaC,SAAxB,CAAb;AACA,cAAIQ,IAAJ,EAAS;AACPjC,iBAAK6B,UAAL,CAAgB,eAAhB,EAAiC,YAAYI,KAAKH,KAAlD;AACA,mBAAK3E,EAAL,CAAQ0D,OAAR,CAAgB,0BAAgBoB,IAAhB,CAAhB;AACD;AACF,SAND;AAOD;AACD,aAAOF,aAAP;AACD;;;;oBAjHkBlC;;;;;;;;;;;;;;;MCPAsC;;;SAGnBjC,UAAU;;;oBAHSiC;;;;;;;;;;;;;;;MCARC,sBAAAA,cACX,qBAAY7E,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;AACD;;MAGU8E,sBAAAA,cACX,qBAAY9E,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;AACD;;MAGU+E,oCAAAA,4BACX,mCAAY/E,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;AACD;;MAGUgF,sCAAAA,8BACX,qCAAYhF,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;AACD;;MAGUiF,uBAAAA,eACX,sBAAYjF,MAAZ,EAAoB;AAAA;;AAClB,SAAKA,MAAL,GAAcA,MAAd;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;MCrBkBkF,2BADpB;AAGC,8BAAYtF,EAAZ,EAAgBuF,EAAhB,EAAoB;AAAA;;AAAA;;AAClB,WAAKvF,EAAL,GAAUA,EAAV;AACA,WAAKuF,EAAL,GAAUA,EAAV;AACA,WAAKC,YAAL,GAAoB,IAApB;;AAEAxF,SAAGE,SAAH,wBAA0B,eAAO;AAC/B,YAAIC,IAAIC,MAAJ,CAAWC,OAAX,KAAuB,IAA3B,EAAiC;AAC/B,gBAAKmF,YAAL,GAAoBrF,IAAIC,MAAJ,CAAW2D,IAA/B;AACD,SAFD,MAEO;AACL,gBAAKyB,YAAL,GAAoB,IAApB;AACD;AACF,OAND;;AAQAxF,SAAGE,SAAH,sCAAwC,eAAO;AAC7C,cAAKuF,OAAL,CAAa,MAAKD,YAAL,CAAkBE,GAA/B,EAAoC7E,IAApC,CAAyC,yBAAiB;AACxD,gBAAK2E,YAAL,GAAoBG,aAApB;AACA3F,aAAG0D,OAAH,CAAW,0CAAgC,EAAhC,CAAX;AACD,SAHD,EAGGL,KAHH,CAGS,eAAO;AACduC,kBAAQC,GAAR,CAAY,uBAAZ;AACD,SALD;AAMD,OAPD;AAQD;;+BAEDC,6CAAkB;AAChB,aAAOvB,KAAKQ,KAAL,CAAWR,KAAKC,SAAL,CAAe,KAAKgB,YAApB,CAAX,CAAP;AACD;;+BAEDC,2BAAQM,QAAO;AAAA;;AACb,aAAO,IAAI/D,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKoC,EAAL,CAAQvC,GAAR,CAAY,gBAAgB+C,MAA5B,EAAoClF,IAApC,CAAyC,kBAAU;;AAEjDqC,kBAAQqB,KAAKQ,KAAL,CAAW3B,OAAOe,QAAlB,CAAR;AAED,SAJD,EAIGd,KAJH,CAIS,eAAO;AACdF,iBAAOG,GAAP;AACD,SAND;AAOD,OARM,CAAP;AASD;;+BAED0C,+BAAW;AAAA;;AACT,aAAO,IAAIhE,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKoC,EAAL,CAAQvC,GAAR,CAAY,YAAZ,EAA0BnC,IAA1B,CAA+B,kBAAU;;AAEvC,cAAIoF,QAAQ,EAAZ;AACA,cAAG7C,OAAOG,UAAP,KAAsB,GAAzB,EAA6B;AAC3B0C,oBAAQ1B,KAAKQ,KAAL,CAAW3B,OAAOe,QAAlB,CAAR;AACD;AACDjB,kBAAQ+C,KAAR;AAED,SARD,EAQG5C,KARH,CAQS,eAAO;AACdF,iBAAOG,GAAP;AACD,SAVD;AAWD,OAZM,CAAP;AAaD;;+BAED4C,6BAASC,WAAWC,UAAUC,OAAOC,UAAUC,QAAQ;AAAA;;AACrD,aAAO,IAAIvE,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,YAAMqD,UAAU;AACdL,qBAAWA,SADG;AAEdC,oBAAUA,QAFI;AAGdC,iBAAOA,KAHO;AAIdC,oBAAUA,QAJI;AAKdC,kBAAQA;AALM,SAAhB;AAOA,eAAKhB,EAAL,CAAQ5B,IAAR,CAAa,YAAb,EAA2B6C,OAA3B,EAAoC3F,IAApC,CAAyC,eAAO;AAC9C,cAAI4F,IAAIlD,UAAJ,KAAmB,GAAvB,EAA4B;AAC1BL,oBAAQqB,KAAKQ,KAAL,CAAW0B,IAAItC,QAAf,CAAR;AACD,WAFD,MAEO;AACLhB,mBAAO,qBAAP;AACD;AAEF,SAPD;AAQD,OAhBM,EAgBJE,KAhBI,CAgBE,eAAO;AACdF,eAAOG,GAAP;AACD,OAlBM,CAAP;AAqBD;;+BAEDQ,uBAAMuC,OAAOC,UAAU;AACrB,UAAMvC,OAAO;AACXsC,eAAOA,KADI;AAEXC,kBAAUA;AAFC,OAAb;AAIA,WAAKf,EAAL,CAAQzB,KAAR,CAAc,yBAAd,EAAyCC,IAAzC;AACD;;+BAED2C,2BAAS;AACP,UAAMtG,SAAS;AACbC,iBAAS,KADI;AAEbmD,iBAAS;AAFI,OAAf;AAIA,WAAK+B,EAAL,CAAQ9B,mBAAR;AACA,WAAKzD,EAAL,CAAQ0D,OAAR,CAAgB,0BAAgBtD,MAAhB,CAAhB;AACD;;+BAEDuG,yCAAeN,OAAOC,UAAU;AAC9B,UAAMvC,OAAO;AACXsC,eAAOA,KADI;AAEXC,kBAAUA;AAFC,OAAb;;AAKA,WAAKf,EAAL,CAAQvB,YAAR,CAAqB,yBAArB,EAAgDD,IAAhD;AACD;;+BAED/C,6CAAkB;AAChB,aAAO,KAAKuE,EAAL,CAAQvE,eAAR,EAAP;AACD;;+BAED4F,+CAAmB;AAAA;;AACjB,aAAO,IAAI5E,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKoC,EAAL,CAAQvC,GAAR,CAAY,uBAAuB,OAAKwC,YAAL,CAAkBE,GAArD,EAA0D7E,IAA1D,CAA+D,kBAAU;;AAEvE,cAAIgG,SAAS,EAAb;AACA,cAAGzD,OAAOG,UAAP,KAAsB,GAAzB,EAA6B;AAC3BsD,qBAAStC,KAAKQ,KAAL,CAAW3B,OAAOe,QAAlB,CAAT;AACD;;AAEDjB,kBAAQ2D,MAAR;AACD,SARD;AASD,OAVM,CAAP;AAWD;;+BAEDC,2CAAgBf,QAAQ;AAAA;;AACtB,aAAO,IAAI/D,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKoC,EAAL,CAAQvC,GAAR,CAAY,gBAAgB+C,MAAhB,GAAyB,SAArC,EAAgDlF,IAAhD,CAAqD,kBAAU;;AAE7D,cAAIgG,SAAS,EAAb;AACA,cAAGzD,OAAOG,UAAP,KAAsB,GAAzB,EAA6B;AAC3BsD,qBAAStC,KAAKQ,KAAL,CAAW3B,OAAOe,QAAlB,CAAT;AACD;;AAEDjB,kBAAQ2D,MAAR;AACD,SARD;AASD,OAVM,CAAP;AAWD;;+BAEDE,mCAAYC,iBAAiB;AAAA;;AAC3B,aAAO,IAAIhF,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKoC,EAAL,CAAQ1B,MAAR,CAAe,iBAAiBmD,eAAhC,EAAiDnG,IAAjD,CAAsD,kBAAU;AAC9D,cAAGuC,OAAOG,UAAP,KAAsB,GAAzB,EAA8B;AAC5BL,oBAAQ,IAAR;AACD,WAFD,MAEO;AACLC,mBAAO,KAAP;AACD;AACF,SAND;AAOD,OARM,CAAP;AASD;;+BAED8D,qDAAqBC,gBAAgB;AAAA;;AACnC,aAAO,IAAIlF,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKoC,EAAL,CAAQ5B,IAAR,CAAa,0BAA0BY,KAAKC,SAAL,CAAe0C,cAAf,CAAvC,EAAuErG,IAAvE,CAA4E,kBAAU;AACpF,cAAGuC,OAAOG,UAAP,KAAsB,GAAzB,EAA8B;AAC5BL,oBAAQ,IAAR;AACD,WAFD,MAEO;AACLC,mBAAO,KAAP;AACD;AACF,SAND;AAOD,OARM,CAAP;AASD;;+BAEDgE,+BAAUC,OAAO;AAAA;;AACf,aAAO,IAAIpF,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,eAAKoC,EAAL,CAAQ5B,IAAR,CAAa,aAAb,EAA4ByD,KAA5B,EAAmCvG,IAAnC,CAAwC,kBAAU;AAChD,cAAGuC,OAAOG,UAAP,KAAsB,GAAzB,EAA8B;AAC5BL,oBAAQE,OAAOe,QAAf;AACD,WAFD,MAEO;AACLhB,mBAAO,IAAP;AACD;AACF,SAND;AAOD,OARM,CAAP;AASD;;+BAEDkE,qCAAatB,QAAQ;AAAA;;AACnB,aAAO,IAAI/D,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,gBAAKoC,EAAL,CAAQ5B,IAAR,CAAa,gBAAgBoC,MAAhB,GAAyB,WAAtC,EAAmDlF,IAAnD,CAAwD,kBAAU;AAChE,cAAGuC,OAAOG,UAAP,KAAsB,GAAzB,EAA8B;AAC5BL,oBAAQE,OAAOe,QAAf;AACD,WAFD,MAEO;AACLhB,mBAAO,IAAP;AACD;AACF,SAND;AAOD,OARM,CAAP;AASD;;+BAEDmE,iCAAWvB,QAAQ;AAAA;;AACjB,aAAO,IAAI/D,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,gBAAKoC,EAAL,CAAQ5B,IAAR,CAAa,gBAAgBoC,MAAhB,GAAyB,SAAtC,EAAiDlF,IAAjD,CAAsD,kBAAU;AAC9D,cAAGuC,OAAOG,UAAP,KAAsB,GAAzB,EAA8B;AAC5BL,oBAAQE,OAAOe,QAAf;AACD,WAFD,MAEO;AACLhB,mBAAO,IAAP;AACD;AACF,SAND;AAOD,OARM,CAAP;AASD;;+BAEDoE,iCAAWC,aAAa;AAAA;;AACtB,aAAO,IAAIxF,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,gBAAKoC,EAAL,CAAQ5B,IAAR,CAAa,gBAAgB6D,YAAY9B,GAA5B,GAAkC,SAA/C,EAA0D8B,WAA1D,EAAuE3G,IAAvE,CAA4E,kBAAU;AACpF,cAAGuC,OAAOG,UAAP,KAAsB,GAAzB,EAA8B;AAC5BL,oBAAQqB,KAAKQ,KAAL,CAAW3B,OAAOe,QAAlB,CAAR;AACD,WAFD,MAEO;AACLhB,mBAAO,IAAP;AACD;AACF,SAND,EAMGE,KANH,CAMS,eAAO;AACdF,iBAAOG,GAAP;AACD,SARD;AASD,OAVM,CAAP;AAWD;;+BAEDmE,iCAAW1B,QAAQ;AAAA;;AACjB,aAAO,IAAI/D,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,gBAAKoC,EAAL,CAAQ1B,MAAR,CAAe,gBAAgBkC,MAA/B,EAAuClF,IAAvC,CAA4C,kBAAU;AACpD,cAAGuC,OAAOG,UAAP,KAAsB,GAAzB,EAA8B;AAC5BL,oBAAQE,OAAOe,QAAf;AACD,WAFD,MAEO;AACLhB,mBAAO,IAAP;AACD;AACF,SAND;AAOD,OARM,CAAP;AASD;;+BAEDsC,2BAAQM,QAAQ;AAAA;;AACd,aAAO,IAAI/D,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,gBAAKoC,EAAL,CAAQvC,GAAR,CAAY,gBAAgB+C,MAA5B,EAAoClF,IAApC,CAAyC,kBAAU;AACjD,cAAGuC,MAAH,EAAW;AACTF,oBAAQqB,KAAKQ,KAAL,CAAW3B,OAAOe,QAAlB,CAAR;AACD,WAFD,MAEO;AACLhB,mBAAO,IAAP;AACD;AACF,SAND;AAOD,OARM,CAAP;AASD;;;;oBA3OkBmC;;;;;;;;;;;;;;;;;;;;;;;;;;MCARoC,oBAAAA,oBAFZ,kHAMC,mBAAY5H,EAAZ,EAAgBE,EAAhB,EAAoB;AAAA;;AAAA,SAFpB2H,eAEoB,GAFF,IAEE;;AAClB,SAAK1H,gBAAL,GAAwBH,EAAxB;AACA,SAAK8H,cAAL,GAAsB5H,EAAtB;;AAEA,SAAK2H,eAAL,GAAuB;AACrBE,WAAK,gBADgB;AAErBC,oBAAc,KAAK7H,gBAAL,CAAsB6F,eAAtB,GAAwCJ;AAFjC,KAAvB;AAID;;;;;;;;;;;;;;;;;;;;;;;;;;MCZUqC,yBAAAA,yBADZ,kHAMC,wBAAYjI,EAAZ,EAAgBE,EAAhB,EAAoB;AAAA;;AAAA,SAHpB2H,eAGoB,GAHF,EAGE;;AAClB,SAAK1H,gBAAL,GAAwBH,EAAxB;AACA,SAAK8H,cAAL,GAAsB5H,EAAtB;;AAIA,SAAK2H,eAAL,GAAuB;AACrBE,WAAK,gBADgB;AAErBC,oBAAc,KAAK7H,gBAAL,CAAsB6F,eAAtB,GAAwCJ;AAFjC,KAAvB;AAID;;;;;;;;;;;;;;;;;;;;;;;;;;MCjBUsC,gBAAAA,gBADZ;AAGC,mBAAYlI,EAAZ,EAAgB;AAAA;;AACd,WAAKG,gBAAL,GAAwBH,EAAxB;AACA,WAAKmI,MAAL,GAAc,EAAd;AACD;;oBAEDlH,+BAAU;AACRmH,+BAAyB,KAAKpE,KAAL,CAAWqE,IAAX,CAAgB,IAAhB,CAAzB,EAAgD,IAAhD;;AAEAC,QAAE,YAAF,EAAgBC,EAAhB,CAAmB,QAAnB,EAA6B,YAAY;AACvCD,UAAE,YAAF,EAAgBE,QAAhB,CAAyB,kBAAzB;AACD,OAFD;AAGD;;oBAEDxE,yBAAQ;AACN8B,cAAQC,GAAR,uBAAgC,KAAKQ,KAArC;;AAEA,WAAKpG,gBAAL,CAAsB6D,KAAtB,CAA4B,KAAKuC,KAAjC,EAAwC,KAAKC,QAA7C;AACD;;;;;;AAGH,WAAS4B,wBAAT,CAAkCK,iBAAlC,EAAqDC,iBAArD,EAAwE;AACtEJ,MAAE,YAAF,EACGK,IADH,CACQ;AACJJ,UAAI,QADA;AAEJK,cAAQ,IAFJ;AAGJC,iBAAW,mBAASC,KAAT,EAAe;AAExBA,cAAMC,cAAN;AACAN;AACD,OAPG;AAQJO,iBAAW,qBAAU;AACnBN;AACA,eAAO,KAAP;AACD,OAXG;AAYJO,cAAQ;AACN1C,eAAO;AACL2C,sBAAc,OADT;AAELC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFF,SADD;AAUN3B,kBAAU;AACR0C,sBAAc,UADN;AAERC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFC;AAVJ;AAZJ,KADR;AAmCD;;;;;;;;;;;;;;;;;;;;;;;;;;MC1DYkB,iBAAAA,iBADZ;AAGC,oBAAYrJ,EAAZ,EAAgB;AAAA;;AACd,WAAKG,gBAAL,GAAwBH,EAAxB;AACD;;qBAED4G,2BAAS;AACPd,cAAQC,GAAR,CAAY,aAAZ;AACA,WAAK5F,gBAAL,CAAsByG,MAAtB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCPU0C,oBAAAA,oBADZ;AAaC,uBAAYtJ,EAAZ,EAAeE,EAAf,EAAmB;AAAA;;AAAA,WAVnBwF,YAUmB,GAVJ,EAUI;AAAA,WATnB6D,YASmB,GATJ,EASI;AAAA,WARnBC,UAQmB,GARN,IAQM;AAAA,WAPnBC,YAOmB,GAPJ;AACb,gBAAQ,KADK;AAEb,mBAAW;AAFE,OAOI;AAAA,WAFnBC,kBAEmB,GAFE,EAEF;;AACjB,WAAKvJ,gBAAL,GAAwBH,EAAxB;AACA,WAAK8H,cAAL,GAAsB5H,EAAtB;AACA,WAAKwF,YAAL,GAAoB,KAAKvF,gBAAL,CAAsB6F,eAAtB,EAApB;AACD;;wBAED/E,+BAAW;AAAA;;AACT,WAAKyI,kBAAL,GAA0B,EAA1B;AACA,WAAKA,kBAAL,CAAwBC,IAAxB,CAA8B,KAAK7B,cAAL,CAAoB1H,SAApB,wCAA2D,eAAO;AAC9F,cAAKsF,YAAL,GAAoB,MAAKvF,gBAAL,CAAsB6F,eAAtB,EAApB;AACD,OAF6B,CAA9B;AAGA4D;AACAxB,+BAAyB,KAAKf,SAAL,CAAegB,IAAf,CAAoB,IAApB,CAAzB,EAAoD,KAAKwB,sBAAL,CAA4BxB,IAA5B,CAAiC,IAAjC,CAApD;AACD;;wBAEDyB,+BAAW;AACT,WAAKJ,kBAAL,CAAwBK,OAAxB,CAAgC,iBAAS;AACvCjB,cAAMkB,OAAN;AACD,OAFD;AAGD;;wBAED3C,iCAAY;AAAA;;AACV,UAAIC,QAAQ;AACV5D,iBAAS,KAAK6F;AADJ,OAAZ;;AAIA,UAAI,KAAKC,UAAL,IAAmB,KAAKA,UAAL,CAAgBS,MAAhB,GAAyB,CAAhD,EAAmD;AACjD,YAAI,KAAKT,UAAL,CAAgB,CAAhB,EAAmBU,IAAnB,GAA0B,OAA9B,EAAuC;AACrC,eAAKT,YAAL,CAAkBU,IAAlB,GAAyB,IAAzB;AACA,eAAKV,YAAL,CAAkB/F,OAAlB,GAA4B,iCAA5B;AACA,eAAKmG,sBAAL;AACD,SAJD,MAIO;AACLO,oBAAU,KAAKZ,UAAL,CAAgB,CAAhB,CAAV,EAA8BzI,IAA9B,CAAmC,8BAAsB;AACvDuG,kBAAM+C,KAAN,GAAcC,kBAAd;AACA,mBAAKnK,gBAAL,CAAsBkH,SAAtB,CAAgCC,KAAhC,EAAuCvG,IAAvC,CAA4C,uBAAe;AACzD+E,sBAAQC,GAAR,CAAY,cAAZ;;AAGA,qBAAK+B,cAAL,CAAoBlE,OAApB,CAA4B,0BAAgB,EAAhB,CAA5B;AACA,qBAAKiG,sBAAL;AACD,aAND,EAMGtG,KANH,CAMS,eAAO;AACduC,sBAAQC,GAAR,CAAY,2BAAZ;AACD,aARD;AASD,WAXD,EAWGxC,KAXH,CAWS,eAAO;AACduC,oBAAQC,GAAR,CAAY,sBAAZ;AACD,WAbD;AAcD;AACF,OArBD,MAqBO;AACL,aAAK5F,gBAAL,CAAsBkH,SAAtB,CAAgCC,KAAhC,EAAuCvG,IAAvC,CAA4C,uBAAe;AACzD,iBAAK+G,cAAL,CAAoBlE,OAApB,CAA4B,0BAAgB,EAAhB,CAA5B;AACA,iBAAKiG,sBAAL;AACD,SAHD,EAGGtG,KAHH,CAGS,eAAO;AACduC,kBAAQC,GAAR,CAAY,2BAAZ;AACD,SALD;AAMD;AACF;;wBAEDwE,+CAAmB;AACjB,WAAKd,YAAL,CAAkBU,IAAlB,GAAyB,KAAzB;AACA,WAAKV,YAAL,CAAkB/F,OAAlB,GAA4B,EAA5B;AACD;;wBAEDmG,2DAAyB;AACvBvB,QAAE,YAAF,EAAgBkC,WAAhB,CAA4B,kBAA5B;AACAlC,QAAE,0BAAF,EAA8BmC,IAA9B,CAAmC,KAAnC,EAA0C,IAA1C;AACAnC,QAAE,eAAF,EAAmBmC,IAAnB,CAAwB,OAAxB,EAAiC,eAAjC;AACA,WAAKjB,UAAL,GAAkB,IAAlB;AACA,WAAKD,YAAL,GAAoB,EAApB;AACD;;;;;;AAGH,WAASa,SAAT,CAAmBM,IAAnB,EAAyB;AACvB,WAAO,IAAIxI,OAAJ,CAAY,UAACkB,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAIsH,SAAS,IAAIC,UAAJ,EAAb;AACAD,aAAOE,MAAP,GAAgB,uBAAe;AAC7B,YAAMC,eAAeC,YAAYC,MAAZ,CAAmB1H,MAAxC;AACA,YAAM2H,eAAeC,KAAKJ,YAAL,CAArB;AACA1H,gBAAQ6H,YAAR;AACD,OAJD;AAKAN,aAAOQ,OAAP,GAAiB,iBAAS;AACxB9H,eAAO,IAAP;AACD,OAFD;AAGAsH,aAAOS,kBAAP,CAA0BV,IAA1B;AACD,KAXM,CAAP;AAYD;;AAED,WAAStC,wBAAT,CAAkCK,iBAAlC,EAAqDC,iBAArD,EAAwE;AACtEJ,MAAE,YAAF,EACGK,IADH,CACQ;AACJJ,UAAI,QADA;AAEJK,cAAQ,IAFJ;AAGJC,iBAAW,mBAASC,KAAT,EAAe;AAExBA,cAAMC,cAAN;AACAN;AACD,OAPG;AAQJO,iBAAW,qBAAU;AACnBN;AACA,eAAO,KAAP;AACD,OAXG;AAYJO,cAAQ;AACNM,sBAAc;AACZL,sBAAc,cADF;AAEZC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFK;AADR;AAZJ,KADR;AA0BD;;AAED,WAASyB,mBAAT,GAA8B;AAC5BtB,MAAE,0BAAF,EACGC,EADH,CACM,OADN,EACe,UAAU8C,CAAV,EAAa;AACxB/C,QAAE,uBAAF,EAA2BA,EAAE+C,EAAEL,MAAJ,EAAYM,OAAZ,EAA3B,EAAkDC,KAAlD;AACD,KAHH;;AAKAjD,MAAE,uBAAF,EAA2BC,EAA3B,CAA8B,QAA9B,EAAwC,UAAUiD,KAAV,EAAiB;AACvD,UAAIC,WAAWnD,EAAE,0BAAF,CAAf;AACA,UAAI,KAAKoD,KAAL,IAAc,KAAKA,KAAL,CAAW,CAAX,CAAlB,EAAiC;AAC/B,YAAIf,SAAS,IAAIC,UAAJ,EAAb;AACAD,eAAOE,MAAP,GAAgB,UAAUQ,CAAV,EAAa;AAC3B/C,YAAE,0BAAF,EAA8BmC,IAA9B,CAAmC,KAAnC,EAA0CY,EAAEL,MAAF,CAAS1H,MAAnD;AACAgF,YAAE,eAAF,EAAmBmC,IAAnB,CAAwB,OAAxB,EAAiC,gBAAjC;AACD,SAHD;;AAKAE,eAAOgB,aAAP,CAAqB,KAAKD,KAAL,CAAW,CAAX,CAArB;AACD,OARD,MAQO;AACLpD,UAAE,0BAAF,EAA8BsD,UAA9B,CAAyC,KAAzC;AACAtD,UAAE,eAAF,EAAmBmC,IAAnB,CAAwB,OAAxB,EAAiC,eAAjC;AACD;AACF,KAdD;;AAgBAnC,MAAE,0BAAF,EACGC,EADH,CACM,OADN,EACe,UAAU8C,CAAV,EAAa;AACxB,UAAIQ,WAAWvD,EAAE,uBAAF,CAAf;AACAwD,cAAQC,WAAR,CAAoBF,SAASG,GAAT,CAAa,EAAb,EAAiBC,KAAjB,CAAuB,IAAvB,CAApB;AACA3D,QAAE,0BAAF,EAA8BsD,UAA9B,CAAyC,KAAzC;AACAtD,QAAE,eAAF,EAAmBmC,IAAnB,CAAwB,OAAxB,EAAiC,eAAjC;AACD,KANH;;AAQAnC,MAAE,YAAF,EAAgBC,EAAhB,CAAmB,QAAnB,EAA6B,YAAY;AACvCD,QAAE,YAAF,EAAgBE,QAAhB,CAAyB,kBAAzB;AACD,KAFD;AAGD;;;;;;;;;;;;;;;MCtKY0D,iBAAAA;;;;;qBAEXC,+BACA;AACEC,aAAOC,OAAP,CAAeC,IAAf;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCCUC,mBAAAA,mBADZ;AAOC,sBAAYrM,EAAZ,EAAgBF,EAAhB,EAAoB;AAAA;;AAAA,WAJpB0F,YAIoB,GAJL,EAIK;AAAA,WAFpBgE,kBAEoB,GAFC,EAED;;AAClB,WAAK5B,cAAL,GAAsB5H,EAAtB;AACA,WAAKC,gBAAL,GAAwBH,EAAxB;AACD;;uBAEDiB,+BAAW;AAAA;;AACT,WAAKyI,kBAAL,GAA0B,EAA1B;AACA,WAAKA,kBAAL,CAAwBC,IAAxB,CAA8B,KAAK7B,cAAL,CAAoB1H,SAApB,wCAA2D,eAAO;AAC9F,cAAKoM,WAAL;AACD,OAF6B,CAA9B;AAGA,WAAKA,WAAL;AACApE,+BAAyB,KAAKqE,MAAL,CAAYpE,IAAZ,CAAiB,IAAjB,CAAzB,EAAiD,IAAjD;AACD;;uBAEDyB,+BAAW;AACT,WAAKJ,kBAAL,CAAwBK,OAAxB,CAAgC,iBAAS;AACvCjB,cAAMkB,OAAN;AACD,OAFD;AAGD;;uBAEDyC,2BAAS;AAAA;;AACP,UAAI,KAAK/G,YAAL,CAAkBc,QAAlB,KAA+B,EAAnC,EAAuC;AACrC,aAAKd,YAAL,CAAkBc,QAAlB,GAA6B,KAAKd,YAAL,CAAkBgH,WAA/C;AACD;;AAED,WAAKvM,gBAAL,CAAsBsH,UAAtB,CAAiC,KAAK/B,YAAtC,EAAoD3E,IAApD,CAAyD,uBAAe;AAEtE,eAAKZ,gBAAL,CAAsB0G,cAAtB,CAAqCa,YAAYnB,KAAjD,EAAwDmB,YAAYlB,QAApE;AACA,eAAKsB,cAAL,CAAoBlE,OAApB,CAA4B,wCAA8B,EAA9B,CAA5B;AACD,OAJD,EAIGL,KAJH,CAIS,eAAO;AACduC,gBAAQC,GAAR,CAAY,qBAAZ;AACA,eAAKyG,WAAL;AACD,OAPD;AAQD;;uBAEDA,qCAAc;AACZ,WAAK9G,YAAL,GAAoB,KAAKvF,gBAAL,CAAsB6F,eAAtB,EAApB;AACA,WAAKN,YAAL,CAAkBgH,WAAlB,GAAgC,EAAhC;AACA,WAAKhH,YAAL,CAAkBc,QAAlB,GAA6B,EAA7B;AACA,WAAKd,YAAL,CAAkBiH,eAAlB,GAAoC,EAApC;AACD;;;;;;AAGH,WAASvE,wBAAT,CAAkCK,iBAAlC,EAAqDC,iBAArD,EAAwE;AACtEJ,MAAE,eAAF,EACGK,IADH,CACQ;AACJJ,UAAI,QADA;AAEJK,cAAQ,IAFJ;AAGJC,iBAAW,mBAASC,KAAT,EAAe;AAExBA,cAAMC,cAAN;AACAN;AACD,OAPG;AAQJO,iBAAW,qBAAU;AACnBN;AACA,eAAO,KAAP;AACD,OAXG;AAYJO,cAAQ;AACN5C,mBAAW;AACT6C,sBAAc,WADL;AAETC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFE,SADL;AAUN7B,kBAAU;AACR4C,sBAAc,UADN;AAERC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFC,SAVJ;AAmBN1B,gBAAQ;AACNyC,sBAAc,QADR;AAENC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFD,SAnBF;AA4BN5B,eAAO;AACL2C,sBAAc,OADT;AAELC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFF,SA5BD;AAqCNuE,qBAAa;AACXxD,sBAAc,aADH;AAEXC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFI,SArCP;AA8CN3B,kBAAU;AACR0C,sBAAc,UADN;AAER0D,oBAAU,IAFF;AAGRzD,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK,EAKL;AACEiB,kBAAS,cADX;AAEEjB,oBAAS;AAFX,WALK;AAHC,SA9CJ;AA4DNwE,yBAAiB;AACfzD,sBAAc,iBADC;AAEf0D,oBAAU,IAFK;AAGfzD,iBAAO,CACL;AACEC,kBAAS,iBADX;AAEEjB,oBAAS;AAFX,WADK;AAHQ;AA5DX;AAZJ,KADR;AAsFD;;;;;;;;;;;;;;;;;;;;;;;;;;MCxIY0E,iBAAAA,iBADZ;AASC,oBAAY3M,EAAZ,EAAgBF,EAAhB,EAAoB;AAAA;;AAAA,WANpBqG,SAMoB,GANR,EAMQ;AAAA,WALpBC,QAKoB,GALT,EAKS;AAAA,WAJpBC,KAIoB,GAJZ,EAIY;AAAA,WAHpBC,QAGoB,GAHT,EAGS;AAAA,WAFpBC,MAEoB,GAFX,GAEW;;AAClB,WAAKvG,EAAL,GAAUA,EAAV;AACA,WAAKC,gBAAL,GAAwBH,EAAxB;AACD;;qBAEDiB,+BAAW;AACTmH,+BAAyB,KAAKhC,QAAL,CAAciC,IAAd,CAAmB,IAAnB,CAAzB,EAAmD,IAAnD;;AAEAC,QAAE,aAAF,EAAiBC,EAAjB,CAAoB,QAApB,EAA8B,YAAY;AACxCD,UAAE,aAAF,EAAiBE,QAAjB,CAA0B,kBAA1B;AACD,OAFD;AAGD;;qBAEDpC,+BAAW;AAAA;;AAET,WAAKjG,gBAAL,CAAsBiG,QAAtB,CAA+B,KAAKC,SAApC,EAA+C,KAAKC,QAApD,EAA8D,KAAKC,KAAnE,EAA0E,KAAKC,QAA/E,EAAyF,KAAKC,MAA9F,EAAsG1F,IAAtG,CAA2G,mBAAW;AACpH,cAAKZ,gBAAL,CAAsB6D,KAAtB,CAA4B,MAAKuC,KAAjC,EAAwC,MAAKC,QAA7C;AACD,OAFD,EAEGjD,KAFH,CAES,eAAO;AACduC,gBAAQC,GAAR,CAAYvC,GAAZ;AACD,OAJD;AAKD;;;;;;AAGH,WAAS4E,wBAAT,CAAkCK,iBAAlC,EAAqDC,iBAArD,EAAwE;AACtEJ,MAAE,aAAF,EACGK,IADH,CACQ;AACJJ,UAAI,QADA;AAEJK,cAAQ,IAFJ;AAGJC,iBAAW,mBAASC,KAAT,EAAe;AAExBA,cAAMC,cAAN;AACAN;AACD,OAPG;AAQJO,iBAAW,qBAAU;AACnBN;AACA,eAAO,KAAP;AACD,OAXG;AAYJO,cAAQ;AACN5C,mBAAW;AACT6C,sBAAc,WADL;AAETC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFE,SADL;AAUN7B,kBAAU;AACR4C,sBAAc,UADN;AAERC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFC,SAVJ;AAmBN1B,gBAAQ;AACNyC,sBAAc,QADR;AAENC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFD,SAnBF;AA4BN5B,eAAO;AACL2C,sBAAc,OADT;AAELC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK;AAFF,SA5BD;AAqCN3B,kBAAU;AACR0C,sBAAc,UADN;AAERC,iBAAO,CACL;AACEC,kBAAS,OADX;AAEEjB,oBAAS;AAFX,WADK,EAKL;AACEiB,kBAAS,cADX;AAEEjB,oBAAS;AAFX,WALK;AAFC,SArCJ;AAkDNwE,yBAAiB;AACfzD,sBAAc,iBADC;AAEfC,iBAAO,CACL;AACEC,kBAAS,iBADX;AAEEjB,oBAAS;AAFX,WADK;AAFQ;AAlDX;AAZJ,KADR;AA2ED;;;;;;;;;;;;MC7GW2E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAGCC,sBAAAA,sBADZ,mGAA0CD,EAA1C;AAKC,yBAAY9M,EAAZ,EAAgBE,EAAhB,EAAoB;AAAA;;AAAA,WAFpBwJ,kBAEoB,GAFC,EAED;;AAClB,WAAKvJ,gBAAL,GAAwBH,EAAxB;AACA,WAAK8H,cAAL,GAAsB5H,EAAtB;AACA,WAAK8M,KAAL,GAAa;AACX,iBAAS,EADE;AAEX,iBAAS;AAFE,OAAb;AAID;;0BAED/L,+BAAW;AAAA;;AACT,WAAKyI,kBAAL,CAAwBC,IAAxB,CAA8B,KAAK7B,cAAL,CAAoB1H,SAApB,wCAA2D,eAAO;AAC9F,cAAK6M,OAAL;AACD,OAF6B,CAA9B;AAGA,WAAKA,OAAL;AACD;;0BAEDnD,+BAAW;AACT,WAAKJ,kBAAL,CAAwBK,OAAxB,CAAgC,iBAAS;AACvCjB,cAAMkB,OAAN;AACD,OAFD;AAGD;;0BAEDiD,6BAAU;AAAA;;AACRH,SAAGI,MAAH,CAAU,KAAV,EAAiBC,MAAjB;;AAEA,WAAKH,KAAL,GAAa;AACX,iBAAS,EADE;AAEX,iBAAS;AAFE,OAAb;;AAKA,WAAK7M,gBAAL,CAAsB+F,QAAtB,GAAiCnF,IAAjC,CAAsC,iBAAS;AAC7CoF,cAAM4D,OAAN,CAAc,gBAAQ;AACpB,iBAAKiD,KAAL,CAAWI,KAAX,CAAiBzD,IAAjB,CAAsB;AACpB,kBAAM1F,KAAK2B,GADS;AAEpB,oBAAQ3B,KAAKoC,SAFO;AAGpB,qBAASpC,KAAKwC,MAHM;AAIpB,8BAAkBxC,KAAKoJ;AAJH,WAAtB;;AAOApJ,eAAKqJ,OAAL,CAAavD,OAAb,CAAqB,wBAAgB;AACnC,mBAAKiD,KAAL,CAAWO,KAAX,CAAiB5D,IAAjB,CAAsB;AACpB,wBAAU1F,KAAK2B,GADK;AAEpB,wBAAU4H,aAAa5H,GAFH;AAGpB,uBAAS;AAHW,aAAtB;AAKD,WAND;AAOD,SAfD;;AAiBA,eAAK6H,eAAL;AAED,OApBD,EAoBGlK,KApBH,CAoBS,eAAO;AACduC,gBAAQC,GAAR,CAAYvC,GAAZ;AACD,OAtBD;AAuBD;;0BAEDiK,6CAAkB;AAChB,UAAIC,QAAQ,GAAZ;AAAA,UAAiBC,SAAS,GAA1B;;AAYA,UAAIC,MAAMd,GAAGI,MAAH,CAAU,QAAV,EACPW,MADO,CACA,KADA,EAEPpD,IAFO,CAEF,OAFE,EAEOiD,KAFP,EAGPjD,IAHO,CAGF,QAHE,EAGQkD,MAHR,CAAV;;AAKA,UAAIG,aAAahB,GAAGiB,eAAH,GACdC,KADc,CACR,MADQ,EACAlB,GAAGmB,SAAH,GAAeC,EAAf,CAAkB,UAASC,CAAT,EAAY;AAAE,eAAOA,EAAED,EAAT;AAAc,OAA9C,CADA,EAEdF,KAFc,CAER,QAFQ,EAEElB,GAAGsB,aAAH,EAFF,EAGdJ,KAHc,CAGR,SAHQ,EAGGlB,GAAGuB,YAAH,CAAgB,GAAhB,CAHH,EAIdL,KAJc,CAIR,QAJQ,EAIElB,GAAGwB,WAAH,CAAeZ,QAAQ,CAAvB,EAA0BC,SAAS,CAAnC,CAJF,CAAjB;;AAMA,UAAIY,OAAOX,IAAIC,MAAJ,CAAW,GAAX,EACRpD,IADQ,CACH,OADG,EACM,OADN,EAER+D,SAFQ,CAEE,MAFF,EAGRC,IAHQ,CAGH,KAAKzB,KAAL,CAAWO,KAHR,EAIRmB,KAJQ,GAIAb,MAJA,CAIO,MAJP,EAKRpD,IALQ,CAKH,cALG,EAKa,UAAS0D,CAAT,EAAY;AAAE,eAAOQ,KAAKC,IAAL,CAAUT,EAAEU,KAAZ,CAAP;AAA4B,OALvD,EAMRpE,IANQ,CAMH,YANG,EAMW,WANX,EAORqE,KAPQ,CAOF,MAPE,EAOM,WAPN,CAAX;;AAwBA,UAAIC,SAASnB,IAAIY,SAAJ,CAAc,SAAd,EACVC,IADU,CACL,KAAKzB,KAAL,CAAWI,KADN,EAEVsB,KAFU,GAGVb,MAHU,CAGH,GAHG,EAIVmB,OAJU,CAIF,OAJE,EAIO,IAJP,CAAb;;AAMAD,aAAOlB,MAAP,CAAc,OAAd,EACGpD,IADH,CACQ,YADR,EACsB,UAAS0D,CAAT,EACpB;AACE,eAAOA,EAAEd,cAAT;AACD,OAJH,EAKG5C,IALH,CAKQ,GALR,EAKa,CAAC,EALd,EAMGA,IANH,CAMQ,GANR,EAMa,CAAC,EANd,EAOGA,IAPH,CAOQ,OAPR,EAOiB,GAPjB,EAQGA,IARH,CAQQ,QARR,EAQkB,GARlB,EASGwE,IATH,CASQnC,GAAGoC,IAAH,GACH3G,EADG,CACA,OADA,EACS4G,WADT,EAEH5G,EAFG,CAEA,MAFA,EAEQ6G,OAFR,EAGH7G,EAHG,CAGA,KAHA,EAGO8G,SAHP,CATR;;AAcA,UAAIC,SAASP,OAAOlB,MAAP,CAAc,MAAd,EACV0B,IADU,CACL,UAASpB,CAAT,EAAY;AAAE,eAAOA,EAAE5M,IAAT;AAAgB,OADzB,EAEVkJ,IAFU,CAEL,GAFK,EAEA,EAFA,EAGVA,IAHU,CAGL,GAHK,EAGA,EAHA,EAIVqE,KAJU,CAIJ,MAJI,EAII,QAJJ,EAKVA,KALU,CAKJ,aALI,EAKW,MALX,EAMVA,KANU,CAMJ,WANI,EAMS,MANT,CAAb;;AAQAhB,iBACGV,KADH,CACS,KAAKJ,KAAL,CAAWI,KADpB,EAEG7E,EAFH,CAEM,MAFN,EAEciH,MAFd;;AAIA1B,iBAAWE,KAAX,CAAiB,MAAjB,EACGT,KADH,CACS,KAAKP,KAAL,CAAWO,KADpB;;AAGA,eAASiC,MAAT,GAAkB;AAChBjB,aACG9D,IADH,CACQ,IADR,EACc,UAAS0D,CAAT,EAAY;AAAE,iBAAOA,EAAEsB,MAAF,CAASC,CAAhB;AAAoB,SADhD,EAEGjF,IAFH,CAEQ,IAFR,EAEc,UAAS0D,CAAT,EAAY;AAAE,iBAAOA,EAAEsB,MAAF,CAASE,CAAhB;AAAoB,SAFhD,EAGGlF,IAHH,CAGQ,IAHR,EAGc,UAAS0D,CAAT,EAAY;AAAE,iBAAOA,EAAEnD,MAAF,CAAS0E,CAAhB;AAAoB,SAHhD,EAIGjF,IAJH,CAIQ,IAJR,EAIc,UAAS0D,CAAT,EAAY;AAAE,iBAAOA,EAAEnD,MAAF,CAAS2E,CAAhB;AAAoB,SAJhD;;AAMAZ,eACGtE,IADH,CACQ,IADR,EACc,UAAS0D,CAAT,EAAY;AAAE,iBAAOA,EAAEuB,CAAT;AAAa,SADzC,EAEGjF,IAFH,CAEQ,IAFR,EAEc,UAAS0D,CAAT,EAAY;AAAE,iBAAOA,EAAEwB,CAAT;AAAa,SAFzC,EAGGlF,IAHH,CAGQ,WAHR,EAGqB,UAAS0D,CAAT,EAAY;AAC7B,iBAAO,eAAe,CAACA,EAAEuB,CAAH,EAAMvB,EAAEwB,CAAR,CAAf,GAA4B,GAAnC;AACD,SALH;AAMD;;AAED,eAASR,WAAT,CAAqBhB,CAArB,EAAwB;AACtB,YAAI,CAACrB,GAAGhE,KAAH,CAAS8G,MAAd,EAAsB9B,WAAW+B,WAAX,CAAuB,GAAvB,EAA4BC,OAA5B;AACtB3B,UAAE4B,EAAF,GAAO5B,EAAEuB,CAAT;AACAvB,UAAE6B,EAAF,GAAO7B,EAAEwB,CAAT;AACD;;AAED,eAASP,OAAT,CAAiBjB,CAAjB,EAAoB;AAClBA,UAAE4B,EAAF,GAAOjD,GAAGhE,KAAH,CAAS4G,CAAhB;AACAvB,UAAE6B,EAAF,GAAOlD,GAAGhE,KAAH,CAAS6G,CAAhB;AACD;;AAED,eAASN,SAAT,CAAmBlB,CAAnB,EAAsB;AACpB,YAAI,CAACrB,GAAGhE,KAAH,CAAS8G,MAAd,EAAsB9B,WAAW+B,WAAX,CAAuB,CAAvB;AACtB1B,UAAE4B,EAAF,GAAO,IAAP;AACA5B,UAAE6B,EAAF,GAAO,IAAP;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC9KUC,mBAAAA,mBADZ;AAYC,sBAAYjQ,EAAZ,EAAgBE,EAAhB,EAAoB;AAAA;;AAAA,WATpB6G,MASoB,GATX,EASW;AAAA,WARpBgB,GAQoB,GARd,EAQc;AAAA,WAPpBrC,YAOoB,GAPL,EAOK;AAAA,WANpBwK,YAMoB,GANL,EAMK;AAAA,WALpBC,cAKoB,GALH,EAKG;AAAA,WAJpBC,gBAIoB,GAJD,KAIC;AAAA,WAFpB1G,kBAEoB,GAFC,EAED;;AAClB,WAAKvJ,gBAAL,GAAwBH,EAAxB;AACA,WAAK8H,cAAL,GAAsB5H,EAAtB;AACA,WAAKwF,YAAL,GAAoB,KAAKvF,gBAAL,CAAsB6F,eAAtB,EAApB;AACD;;uBAEDmG,6BAAStE,iBAAiB;AAAA;;AACxB/B,cAAQC,GAAR,CAAY8B,eAAZ;AACA,WAAKsI,cAAL,GAAsBtI,gBAAgBG,YAAtC;AACA,WAAKD,GAAL,GAAWF,gBAAgBE,GAA3B;AACA,WAAK5H,gBAAL,CAAsBwF,OAAtB,CAA8BkC,gBAAgBG,YAA9C,EAA4DjH,IAA5D,CAAiE,qBAAa;AAC5E,cAAKmP,YAAL,GAAoBG,SAApB;AACD,OAFD,EAEG9M,KAFH,CAES,eAAO;AACduC,gBAAQC,GAAR,CAAYvC,GAAZ;AACD,OAJD;AAKD;;uBAEDvC,+BAAW;AAAA;;AACT,WAAKyI,kBAAL,GAA0B,EAA1B;AACA,WAAKA,kBAAL,CAAwBC,IAAxB,CAA8B,KAAK7B,cAAL,CAAoB1H,SAApB,wBAA2C,eAAO;AAC9E,eAAKkQ,eAAL;AACD,OAF6B,CAA9B;AAGA,WAAK5G,kBAAL,CAAwBC,IAAxB,CAA8B,KAAK7B,cAAL,CAAoB1H,SAApB,wCAA2D,eAAO;AAC9F,eAAKkQ,eAAL;AACA,YAAI,OAAKH,cAAL,KAAwB,OAAKzK,YAAL,CAAkBE,GAA9C,EAAkD;AAChD,iBAAKF,YAAL,GAAoB,OAAKvF,gBAAL,CAAsB6F,eAAtB,EAApB;AACA,iBAAKkK,YAAL,GAAoB,OAAK/P,gBAAL,CAAsB6F,eAAtB,EAApB;AACD;AACF,OAN6B,CAA9B;;AAQA,WAAKsK,eAAL;AACD;;uBAEDxG,+BAAW;AACT,WAAKJ,kBAAL,CAAwBK,OAAxB,CAAgC,iBAAS;AACvCjB,cAAMkB,OAAN;AACD,OAFD;AAGD;;uBAED/C,mCAAYC,iBAAiB;AAAA;;AAC3B,WAAK/G,gBAAL,CAAsB8G,WAAtB,CAAkCC,eAAlC,EAAmDnG,IAAnD,CAAwD,kBAAU;AAChE,YAAMwP,gBAAgB,OAAKxJ,MAAL,CAAYyJ,SAAZ,CAAsB,iBAAS;AACnD,iBAAOlJ,MAAM1B,GAAN,KAAcsB,eAArB;AACD,SAFqB,CAAtB;;AAIA,YAAIqJ,gBAAgB,CAAC,CAArB,EAAwB;AACtB,iBAAKxJ,MAAL,CAAY0J,MAAZ,CAAmBF,aAAnB,EAAkC,CAAlC;AACA,iBAAKzI,cAAL,CAAoBlE,OAApB,CAA4B,0BAAgB,EAAhB,CAA5B;AACAkC,kBAAQC,GAAR,CAAY,4BAAZ;AACD;AACF,OAVD,EAUGxC,KAVH,CAUS,eAAO;AACduC,gBAAQC,GAAR,CAAY,4BAAZ;AACD,OAZD;AAaD;;uBAEDoB,uDAAuB;AAAA;;AACrB,UAAIC,iBAAiB,EAArB;AACA,WAAKL,MAAL,CAAYgD,OAAZ,CAAoB,iBAAS;AAC3B,YAAGzC,MAAMoJ,gBAAT,EAA2B;AACzBtJ,yBAAeuC,IAAf,CAAoBrC,MAAM1B,GAA1B;AACD;AACF,OAJD;;AAMA,UAAIwB,eAAe6C,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,aAAK9J,gBAAL,CAAsBgH,oBAAtB,CAA2CC,cAA3C,EAA2DrG,IAA3D,CAAgE,kBAAU;AACxE,iBAAK+G,cAAL,CAAoBlE,OAApB,CAA4B,0BAAgB,EAAhB,CAA5B;AACD,SAFD,EAEGL,KAFH,CAES,eAAO;AACduC,kBAAQC,GAAR,CAAYvC,GAAZ;AACD,SAJD;AAKD;;AAED,WAAKmN,mBAAL;AACD;;uBAEDC,mDAAoB3K,QAAQ;AAAA;;AAC1B,UAAImB,iBAAiB,EAArB;AACA,WAAKL,MAAL,CAAYgD,OAAZ,CAAoB,iBAAS;AAC3B,YAAGzC,MAAMrD,IAAN,CAAW2B,GAAX,KAAmBK,MAAtB,EAA8B;AAC5BmB,yBAAeuC,IAAf,CAAoBrC,MAAM1B,GAA1B;AACD;AACF,OAJD;;AAMA,UAAIwB,eAAe6C,MAAf,GAAwB,CAA5B,EAA+B;AAC7B,aAAK9J,gBAAL,CAAsBgH,oBAAtB,CAA2CC,cAA3C,EAA2DrG,IAA3D,CAAgE,kBAAU;AACxE,iBAAK+G,cAAL,CAAoBlE,OAApB,CAA4B,0BAAgB,EAAhB,CAA5B;AACD,SAFD,EAEGL,KAFH,CAES,eAAO;AACduC,kBAAQC,GAAR,CAAYvC,GAAZ;AACD,SAJD;AAKD;AACF;;uBAED8M,6CAAiB;AAAA;;AACf,WAAKvJ,MAAL,GAAc,EAAd;;AAGA,UAAI8J,uBAAuB,EAA3B;AACA,UAAI,KAAK9I,GAAL,KAAa,gBAAjB,EAAkC;AAEhC8I,+BAAuB,kBAAvB;AACD,OAHD,MAGO;AAELA,+BAAuB,iBAAvB;AACD;;AAED,WAAK1Q,gBAAL,CAAsB0Q,oBAAtB,EAA4C,KAAKV,cAAjD,EAAiEpP,IAAjE,CAAsE,kBAAU;;AAE9EgG,eAAO+J,IAAP,CAAY,UAACC,MAAD,EAASC,MAAT,EAAoB;AAC9B,cAAMC,UAAU,IAAIC,IAAJ,CAASH,OAAOI,MAAhB,CAAhB;AACA,cAAMC,UAAU,IAAIF,IAAJ,CAASF,OAAOG,MAAhB,CAAhB;;AAEA,iBAAOC,QAAQC,OAAR,KAAoBJ,QAAQI,OAAR,EAA3B;AACD,SALD;;AAOAtK,eAAOgD,OAAP,CAAe,iBAAS;AACtBzC,gBAAMoJ,gBAAN,GAAyB,KAAzB;AACApJ,gBAAMgK,YAAN,GAAqB,IAAIJ,IAAJ,CAAS5J,MAAM6J,MAAf,EAAuBI,cAAvB,CAAsC,OAAtC,CAArB;AACAjK,gBAAMkK,SAAN,GAAmBlK,MAAMrD,IAAN,KAAe,IAAf,IAAuB,OAAKyB,YAAL,CAAkBE,GAAlB,KAA0B0B,MAAMrD,IAAN,CAAW2B,GAA7D,IAAqE,OAAKF,YAAL,CAAkB+L,KAAlB,KAA4B,OAAnH;AACA,iBAAK1K,MAAL,CAAY4C,IAAZ,CAAiBrC,KAAjB;AACD,SALD;;AAOAxB,gBAAQC,GAAR,CAAY,OAAKgB,MAAjB;AACD,OAjBD;AAkBD;;uBAED4J,qDAAqB;AACnB,WAAK5J,MAAL,CAAYgD,OAAZ,CAAoB,iBAAS;AAC3BzC,cAAMoJ,gBAAN,GAAyB,KAAzB;AACD,OAFD;;AAIA,WAAKN,gBAAL,GAAwB,CAAC,KAAKA,gBAA9B;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC5IUsB,eAAAA,eADZ;AASC,kBAAY1R,EAAZ,EAAeE,EAAf,EAAkBM,MAAlB,EAA0B;AAAA;;AAAA,WAN1BkF,YAM0B,GANX,EAMW;AAAA,WAL1BsC,YAK0B,GALX,EAKW;AAAA,WAJ1B2J,UAI0B,GAJb,EAIa;AAAA,WAF1BjI,kBAE0B,GAFL,EAEK;;AACxB,WAAKvJ,gBAAL,GAAwBH,EAAxB;AACA,WAAK8H,cAAL,GAAsB5H,EAAtB;AACA,WAAKM,MAAL,GAAcA,MAAd;AACA,WAAKkF,YAAL,GAAoB,KAAKvF,gBAAL,CAAsB6F,eAAtB,EAApB;AACD;;mBAED/E,+BAAW;AAAA;;AACT,WAAKyI,kBAAL,GAA0B,EAA1B;AACA,WAAKA,kBAAL,CAAwBC,IAAxB,CAA8B,KAAK7B,cAAL,CAAoB1H,SAApB,wBAA2C,eAAO;AAC9E,cAAKoM,WAAL;AACD,OAF6B,CAA9B;;AAIA,WAAK9C,kBAAL,CAAwBC,IAAxB,CAA6B,KAAK7B,cAAL,CAAoB1H,SAApB,wCAA2D,eAAO;AAC7F,cAAKoM,WAAL;AACD,OAF4B,CAA7B;;AAIA,WAAK9C,kBAAL,CAAwBC,IAAxB,CAA8B,KAAK7B,cAAL,CAAoB1H,SAApB,yBAA4C,eAAO;AAC/E,YAAGC,IAAIC,MAAJ,CAAWsR,SAAX,KAAyB,MAAKD,UAAL,CAAgB/L,GAA5C,EAAiD;AAC/C,gBAAKpF,MAAL,CAAYQ,eAAZ,CAA4B,OAA5B;AACD;AACF,OAJ6B,CAA9B;AAKD;;mBAED8I,+BAAW;AACT,WAAKJ,kBAAL,CAAwBK,OAAxB,CAAgC,iBAAS;AACvCjB,cAAMkB,OAAN;AACD,OAFD;AAGD;;mBAEDmC,6BAASlG,QAAQ;AACfH,cAAQC,GAAR,CAAYE,MAAZ;AACA,WAAK+B,YAAL,GAAoB/B,MAApB;AACA,WAAKuG,WAAL;AACD;;mBAEDhF,iCAAWvB,QAAQ;AAAA;;AACjB,WAAK9F,gBAAL,CAAsBqH,UAAtB,CAAiCvB,MAAjC,EAAyClF,IAAzC,CAA8C,kBAAU;AACtD,YAAMwP,gBAAgB,OAAK7K,YAAL,CAAkB4H,OAAlB,CAA0BuE,OAA1B,CAAkC5L,MAAlC,CAAtB;AACA,YAAIsK,kBAAkB,CAAC,CAAvB,EAA0B;AACxB,iBAAK7K,YAAL,CAAkB4H,OAAlB,CAA0B3D,IAA1B,CAA+B1D,MAA/B;AACD;AACD,eAAK6B,cAAL,CAAoBlE,OAApB,CAA4B,wCAA8B,EAA9B,CAA5B;AACD,OAND,EAMGL,KANH,CAMS,eAAO;AACduC,gBAAQC,GAAR,CAAY,6BAAZ;AACD,OARD;AASD;;mBAEDwB,qCAAatB,QAAQ;AAAA;;AACnB,WAAK9F,gBAAL,CAAsBoH,YAAtB,CAAmCtB,MAAnC,EAA2ClF,IAA3C,CAAgD,kBAAU;AACtD,YAAMwP,gBAAgB,OAAK7K,YAAL,CAAkB4H,OAAlB,CAA0BuE,OAA1B,CAAkC5L,MAAlC,CAAtB;AACA,YAAIsK,kBAAkB,CAAC,CAAvB,EAA0B;AACxB,iBAAK7K,YAAL,CAAkB4H,OAAlB,CAA0BmD,MAA1B,CAAiCF,aAAjC,EAAgD,CAAhD;AACD;AACH,eAAKzI,cAAL,CAAoBlE,OAApB,CAA4B,wCAA8B,EAA9B,CAA5B;AACC,OANH,EAOEL,KAPF,CAOQ,eAAO;AACbuC,gBAAQC,GAAR,CAAY,+BAAZ;AACD,OATD;AAWD;;mBAED4B,iCAAW1B,QAAQ;AAAA;;AACjB,WAAK9F,gBAAL,CAAsBwH,UAAtB,CAAiC1B,MAAjC,EAAyClF,IAAzC,CAA8C,kBAAU;;AAWpD,eAAK+G,cAAL,CAAoBlE,OAApB,CAA4B,2BAAiB,EAAEgO,WAAW3L,MAAb,EAAjB,CAA5B;AACD,OAZH,EAaE1C,KAbF,CAaQ,eAAO;AACbuC,gBAAQC,GAAR,CAAY,6BAAZ;AACD,OAfD;AAgBD;;mBAEDyG,qCAAa;AAAA;;AACX,WAAKrM,gBAAL,CAAsBwF,OAAtB,CAA8B,KAAKqC,YAAnC,EAAiDjH,IAAjD,CAAsD,qBAAa;AACjE,eAAK4Q,UAAL,GAAkBtB,SAAlB;AACA,eAAKsB,UAAL,CAAgBG,YAAhB,GAA+B,IAAIZ,IAAJ,CAAS,OAAKS,UAAL,CAAgBI,MAAzB,EAAiCC,WAAjC,EAA/B;AACA,eAAKL,UAAL,CAAgBM,SAAhB,GAA4B,OAAKvM,YAAL,CAAkBE,GAAlB,KAA0B,OAAKoC,YAA3D;;AAGA,YAAIkK,mBAAmB,OAAKxM,YAAL,CAAkB4H,OAAlB,CAA0BkD,SAA1B,CAAoC,0BAAkB;AAC3E,iBAAO,OAAKmB,UAAL,CAAgB/L,GAAhB,KAAwBuM,cAA/B;AACD,SAFsB,CAAvB;AAGA,eAAKR,UAAL,CAAgBS,WAAhB,GAA8BF,qBAAqB,CAAC,CAApD;;AAGA,YAAIV,YAAY,KAAhB;AACA,YAAI,OAAK9L,YAAL,CAAkBE,GAAlB,KAA0B,OAAKoC,YAA/B,IACA,OAAKtC,YAAL,CAAkB+L,KAAlB,KAA4B,OADhC,EACyC;AACvCD,sBAAY,IAAZ;AACD;AACD,eAAKG,UAAL,CAAgBH,SAAhB,GAA4BA,SAA5B;;AAEA1L,gBAAQC,GAAR,CAAYsK,SAAZ;AACD,OApBD,EAoBG9M,KApBH,CAoBS,eAAO;AACduC,gBAAQC,GAAR,CAAY,sBAAZ;AACAD,gBAAQC,GAAR,CAAYvC,GAAZ;AACD,OAvBD;AAwBD;;mBAED6O,qCAAapM,QAAO;AAClB,WAAKzF,MAAL,CAAYQ,eAAZ,CAA4B,cAA5B,EAA4C,EAAEkN,IAAIjI,MAAN,EAA5C;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCvHUqM,uBAAAA,uBADZ;AAKC,0BAAYtS,EAAZ,EAAgBE,EAAhB,EAAoB;AAAA;;AAAA,WAFpB2H,eAEoB,GAFF,EAEE;;AAClB,WAAK1H,gBAAL,GAAwBH,EAAxB;AACA,WAAK8H,cAAL,GAAsB5H,EAAtB;;AAEA,WAAK2H,eAAL,CAAqBE,GAArB,GAA2B,cAA3B;AACD;;2BAEDoE,6BAASoG,SAAS;AAChB,UAAIA,WAAWA,QAAQrE,EAAvB,EAA2B;AACzB,aAAKrG,eAAL,CAAqBG,YAArB,GAAoCuK,QAAQrE,EAA5C;AACD,OAFD,MAEO;AACL,aAAKrG,eAAL,CAAqBG,YAArB,GAAoC,KAAK7H,gBAAL,CAAsBuF,YAAtB,CAAmCE,GAAvE;AACD;AAEF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MClBUqC,yBAAAA,yBADZ;AAOC,4BAAYjI,EAAZ,EAAgBE,EAAhB,EAAoB;AAAA;;AAAA,WAJpBiG,KAIoB,GAJZ,EAIY;AAAA,WAHpBT,YAGoB,GAHL,EAGK;AAAA,WAFpBgE,kBAEoB,GAFC,EAED;;AAClB,WAAKvJ,gBAAL,GAAwBH,EAAxB;AACA,WAAK8H,cAAL,GAAsB5H,EAAtB;AACA,WAAKwF,YAAL,GAAoB,KAAKvF,gBAAL,CAAsBuF,YAA1C;AACD;;6BAEDzE,+BAAW;AAAA;;AACT,WAAKyI,kBAAL,GAA0B,EAA1B;AACA,WAAKA,kBAAL,CAAwBC,IAAxB,CAA6B,KAAK7B,cAAL,CAAoB1H,SAApB,yBAA4C,eAAO;AAC9E,cAAKoS,YAAL;AACD,OAF4B,CAA7B;AAGA,WAAKA,YAAL;AACD;;6BAED1I,+BAAW;AACT,WAAKJ,kBAAL,CAAwBK,OAAxB,CAAgC,iBAAS;AACvCjB,cAAMkB,OAAN;AACD,OAFD;AAGD;;6BAEDwI,uCAAc;AAAA;;AACZ,WAAKrS,gBAAL,CAAsB+F,QAAtB,GAAiCnF,IAAjC,CAAsC,sBAAc;AAClD,eAAKoF,KAAL,GAAasM,UAAb;AACD,OAFD,EAEGlP,KAFH,CAES,eAAO;AACduC,gBAAQC,GAAR,CAAY,iCAAZ;AACD,OAJD;AAKD;;;;;ACtCH;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA","file":"app-bundle.js","sourcesContent":["import {inject, Aurelia} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginStatus} from './services/messages';\nimport ZwitscherService from './services/zwitscher-service';\n\n@inject(ZwitscherService, Aurelia, EventAggregator)\nexport class App {\n\n  constructor(zs, au, ea) {\n    this.au = au;\n    this.zwitscherService = zs;\n    ea.subscribe(LoginStatus, msg => {\n      if (msg.status.success === true) {\n        //see following thread\n        //http://stackoverflow.com/questions/36247052/aurelia-clear-route-history-when-switching-to-other-app-using-setroot/40170520#40170520\n        this.router.navigate('/', { replace: true, trigger: false});\n        this.router.reset();\n        this.router.deactivate();\n        au.setRoot('home').then(() => {\n          this.router.navigateToRoute('globalTimeline');\n        });\n      } else {\n        this.router.navigate('/', { replace: true, trigger: false});\n        this.router.reset();\n        this.router.deactivate();\n        au.setRoot('app').then(() => {\n          this.router.navigateToRoute('login');\n        });\n      }\n    });\n  }\n\n  attached() {\n    if (this.zwitscherService.isAuthenticated()) {\n      this.au.setRoot('home').then(() => {\n        this.router.navigateToRoute('globalTimeline');\n      });\n    }\n  }\n\n  configureRouter(config, router) {\n    config.map([\n      { route: ['', 'login'], name: 'login', moduleId: 'viewmodels/login/login', nav: true, title: 'Login' },\n      { route: 'signup', name: 'signup', moduleId: 'viewmodels/signup/signup', nav: true, title: 'Signup' }\n    ]);\n\n    config.mapUnknownRoutes(instruction => {\n      return 'login';\n    });\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import { inject, Aurelia } from 'aurelia-framework';\n\n@inject(Aurelia)\nexport class Home {\n\n  constructor(au) {\n    this.aurelia = au;\n  }\n\n  configureRouter(config, router) {\n    config.map([\n      { route: ['', 'globalTimeline'], name: 'globalTimeline', moduleId: 'viewmodels/globalTimeline/globalTimeline', nav: true, title: 'Global Timeline' },\n      { route: 'userTimeline/:id?', name: 'userTimeline', moduleId: 'viewmodels/userTimeline/userTimeline', nav: true, title: 'User Timeline', href: '#/userTimeline' },\n\n      { route: 'users', name: 'users', moduleId: 'viewmodels/users/users', nav: true, title: 'Users' },\n      { route: 'socialGraph', name: 'socialGraph', moduleId: 'viewmodels/socialGraph/socialGraph', nav: true, title: 'Social Graph' },\n      { route: 'dashboard', name: 'dashboard', moduleId: 'viewmodels/dashboard/dashboard', nav: true, title: 'Dashboard' },\n      { route: 'settings', name: 'settings', moduleId: 'viewmodels/settings/settings', nav: true, title: 'Settings' },\n      { route: 'logout', name: 'logout', moduleId: 'viewmodels/logout/logout', nav: true, title: 'Logout' },\n      { route: 'reload', name: 'reload', moduleId: 'viewmodels/reload/reload',  },\n    ]);\n\n    config.mapUnknownRoutes(instruction => {\n      return 'globalTimeline';\n    });\n\n    this.router = router;\n  }\n}\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-http-client';\nimport Fixtures from './fixtures';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {LoginStatus} from './messages';\n\n@inject(HttpClient, Fixtures, EventAggregator )\nexport default class AsyncHttpClient {\n\n  constructor(httpClient, fixtures, ea) {\n    this.http = httpClient;\n    this.http.configure(http => {\n      http.withBaseUrl(fixtures.baseUrl);\n    });\n    this.ea = ea;\n  }\n\n  get(url) {\n    return new Promise((resolve, reject) => {\n      this.http.get(url).then(result => {\n        resolve(result);\n      }).catch(err => {\n        if (err.statusCode === 401){\n          const status = {\n            success: false,\n            message: ''\n          };\n          this.clearAuthentication();\n          this.ea.publish(new LoginStatus(status));\n        }\n        reject(err);\n      });\n    });\n  }\n\n  post(url, obj) {\n    return new Promise((resolve, reject) => {\n      this.http.post(url, obj).then(result => {\n        resolve(result);\n      }).catch(err => {\n        if (err.statusCode === 401){\n          const status = {\n            success: false,\n            message: ''\n          };\n          this.clearAuthentication();\n          this.ea.publish(new LoginStatus(status));\n        }\n        reject(err);\n      });\n    });\n  }\n\n  delete(url) {\n    return new Promise((resolve, reject) => {\n      this.http.delete(url).then(result => {\n        resolve(result);\n      }).catch(err => {\n        if (err.statusCode === 401){\n          const status = {\n            success: false,\n            message: ''\n          };\n          this.clearAuthentication();\n          this.ea.publish(new LoginStatus(status));\n        }\n        reject(err);\n      });\n    });\n  }\n\n  login(url, user) {\n    this.authenticate(url, user).then(successStatus => {\n      this.ea.publish(new LoginStatus(successStatus));\n    }).catch(errorStatus => {\n      this.ea.publish(new LoginStatus(errorStatus));\n    });\n  }\n  authenticate(url, user) {\n    return new Promise((resolve, reject) => {\n      this.http.post(url, user).then(response => {\n        const status = response.content;\n        if (status.success) {\n          localStorage.zwitscher = JSON.stringify(response.content);\n          this.http.configure(configuration => {\n            configuration.withHeader('Authorization', 'bearer ' + response.content.token);\n          });\n        }\n        resolve(status);\n      }).catch(error => {\n        const status = {\n          success: false,\n          message: 'service not available'\n        };\n        reject(status);\n      });\n    });\n  }\n\n  clearAuthentication() {\n    localStorage.zwitscher = null;\n    this.http.configure(configuration => {\n      configuration.withHeader('Authorization', '');\n    });\n  }\n\n  isAuthenticated() {\n\n    let authenticated = false;\n    if (localStorage.zwitscher !== 'null' && localStorage.zwitscher !== undefined) {\n      authenticated = true;\n      this.http.configure(http => {\n        const auth = JSON.parse(localStorage.zwitscher);\n        if (auth){ //TODO: Check why needs to be checked\n          http.withHeader('Authorization', 'bearer ' + auth.token);\n          this.ea.publish(new LoginStatus(auth));\n        }\n      });\n    }\n    return authenticated;\n  }\n}\n","export default class Fixtures {\n\n  // baseUrl = 'http://localhost:4000';\n  baseUrl = 'https://zwitscher.herokuapp.com';\n\n}\n","export class LoginStatus {\n  constructor(status) {\n    this.status = status;\n  }\n}\n\nexport class TweetUpdate {\n  constructor(status) {\n    this.status = status;\n  }\n}\n\nexport class TriggerLoggedInUserUpdate {\n  constructor(status) {\n    this.status = status;\n  }\n}\n\nexport class CompletedLoggedInUserUpdate {\n  constructor(status) {\n    this.status = status;\n  }\n}\n\nexport class UsersChanged {\n  constructor(status) {\n    this.status = status;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {TotalUpdate, LoginStatus, TriggerLoggedInUserUpdate, CompletedLoggedInUserUpdate} from './messages';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport AsyncHttpClient from './async-http-client';\n\n@inject(EventAggregator, AsyncHttpClient)\nexport default class ZwitscherService {\n\n  constructor(ea, ac) {\n    this.ea = ea;\n    this.ac = ac;\n    this.loggedInUser = null;\n\n    ea.subscribe(LoginStatus, msg => {\n      if (msg.status.success === true) {\n        this.loggedInUser = msg.status.user;\n      } else {\n        this.loggedInUser = null;\n      }\n    });\n\n    ea.subscribe(TriggerLoggedInUserUpdate, msg => {\n      this.getUser(this.loggedInUser._id).then(refreshedUser => {\n        this.loggedInUser = refreshedUser;\n        ea.publish(new CompletedLoggedInUserUpdate({}));\n      }).catch(err => {\n        console.log('error refreshing user');\n      });\n    });\n  }\n\n  getLoggedInUser() {\n    return JSON.parse(JSON.stringify(this.loggedInUser));\n  }\n\n  getUser(userID){\n    return new Promise((resolve, reject) => {\n      this.ac.get('/api/users/' + userID).then(result => {\n\n        resolve(JSON.parse(result.response));\n\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  getUsers() {\n    return new Promise((resolve, reject) => {\n      this.ac.get('/api/users').then(result => {\n\n        let users = [];\n        if(result.statusCode === 200){\n          users = JSON.parse(result.response);\n        }\n        resolve(users);\n\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  register(firstName, lastName, email, password, gender) {\n    return new Promise((resolve, reject) => {\n      const newUser = {\n        firstName: firstName,\n        lastName: lastName,\n        email: email,\n        password: password,\n        gender: gender,\n      };\n      this.ac.post('/api/users', newUser).then(res => {\n        if (res.statusCode === 201) {\n          resolve(JSON.parse(res.response));\n        } else {\n          reject('error creating user');\n        }\n\n      });\n    }).catch(err => {\n      reject(err);\n    });\n\n\n  }\n\n  login(email, password) {\n    const user = {\n      email: email,\n      password: password\n    };\n    this.ac.login('/api/users/authenticate', user);\n  }\n\n  logout() {\n    const status = {\n      success: false,\n      message: ''\n    };\n    this.ac.clearAuthentication();\n    this.ea.publish(new LoginStatus(status));\n  }\n\n  reAuhtenticate(email, password) {\n    const user = {\n      email: email,\n      password: password\n    };\n    // this.ac.clearAuthentication();\n    this.ac.authenticate('/api/users/authenticate', user);\n  }\n\n  isAuthenticated() {\n    return this.ac.isAuthenticated();\n  }\n\n  getTweetsForUser() {\n    return new Promise((resolve, reject) => {\n      this.ac.get('/api/tweets/users/' + this.loggedInUser._id).then(result => {\n\n        let tweets = [];\n        if(result.statusCode === 200){\n          tweets = JSON.parse(result.response);\n        }\n\n        resolve(tweets);\n      });\n    });\n  }\n\n  getTweetsByUser(userID) {\n    return new Promise((resolve, reject) => {\n      this.ac.get('/api/users/' + userID + '/tweets').then(result => {\n\n        let tweets = [];\n        if(result.statusCode === 200){\n          tweets = JSON.parse(result.response);\n        }\n\n        resolve(tweets);\n      });\n    });\n  }\n\n  deleteTweet(tweetToDeleteID) {\n    return new Promise((resolve, reject) => {\n      this.ac.delete('/api/tweets/' + tweetToDeleteID).then(result => {\n        if(result.statusCode === 204) {\n          resolve(true);\n        } else {\n          reject(false);\n        }\n      });\n    });\n  };\n\n  deleteMultipleTweets(tweetsToDelete) {\n    return new Promise((resolve, reject) => {\n      this.ac.post('/api/deleteTweetsJob/' + JSON.stringify(tweetsToDelete)).then(result => {\n        if(result.statusCode === 204) {\n          resolve(true);\n        } else {\n          reject(false);\n        }\n      });\n    });\n  };\n\n  postTweet(tweet) {\n    return new Promise((resolve, reject) => {\n      this.ac.post('/api/tweets', tweet).then(result => {\n        if(result.statusCode === 201) {\n          resolve(result.response);\n        } else {\n          reject(null);\n        }\n      });\n    });\n  }\n\n  unfollowUser(userID) {\n    return new Promise((resolve, reject) => {\n      this.ac.post('/api/users/' + userID + '/unfollow').then(result => {\n        if(result.statusCode === 201) {\n          resolve(result.response);\n        } else {\n          reject(null);\n        }\n      });\n    });\n  }\n\n  followUser(userID) {\n    return new Promise((resolve, reject) => {\n      this.ac.post('/api/users/' + userID + '/follow').then(result => {\n        if(result.statusCode === 201) {\n          resolve(result.response);\n        } else {\n          reject(null);\n        }\n      });\n    });\n  }\n\n  updateUser(updatedUser) {\n    return new Promise((resolve, reject) => {\n      this.ac.post('/api/users/' + updatedUser._id + '/update', updatedUser).then(result => {\n        if(result.statusCode === 201) {\n          resolve(JSON.parse(result.response));\n        } else {\n          reject(null);\n        }\n      }).catch(err => {\n        reject(err);\n      });\n    });\n  }\n\n  removeUser(userID) {\n    return new Promise((resolve, reject) => {\n      this.ac.delete('/api/users/' + userID).then(result => {\n        if(result.statusCode === 204) {\n          resolve(result.response);\n        } else {\n          reject(null);\n        }\n      });\n    });\n  }\n\n  getUser(userID) {\n    return new Promise((resolve, reject) => {\n      this.ac.get('/api/users/' + userID).then(result => {\n        if(result) {\n          resolve(JSON.parse(result.response));\n        } else {\n          reject(null);\n        }\n      });\n    });\n  };\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\n@inject(ZwitscherService, EventAggregator)\n\nexport class Dashboard {\n\n  timelineOptions = null;\n\n  constructor(zs, ea) {\n    this.zwitscherService = zs;\n    this.eventAgregator = ea;\n\n    this.timelineOptions = {\n      src: 'globalTimeline',\n      viewedUserID: this.zwitscherService.getLoggedInUser()._id,\n    };\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {TweetUpdate} from '../../services/messages';\n\n@inject(ZwitscherService, EventAggregator)\nexport class GlobalTimeline {\n\n  timelineOptions = {};\n  // loggedInUser = {};\n\n  constructor(zs, ea) {\n    this.zwitscherService = zs;\n    this.eventAgregator = ea;\n\n    // this.loggedInUser = this.zwitscherService.loggedInUser;\n\n    this.timelineOptions = {\n      src: 'globalTimeline',\n      viewedUserID: this.zwitscherService.getLoggedInUser()._id,\n    };\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\n\n@inject(ZwitscherService)\nexport class Login {\n\n  constructor(zs) {\n    this.zwitscherService = zs;\n    this.prompt = '';\n  }\n\n  attached(){\n    initializeFormValidation(this.login.bind(this), null);\n\n    $('#loginForm').on('submit', function () {\n      $('#loginForm').addClass('loading disabled');\n    });\n  }\n\n  login() {\n    console.log(`Trying to log in ${this.email}`);\n\n    this.zwitscherService.login(this.email, this.password);\n  }\n}\n\nfunction initializeFormValidation(onSuccessFunction, onFailureFunction) {\n  $('#loginForm')\n    .form({\n      on: 'submit',\n      inline: true,\n      onSuccess: function(event){\n        //prevents redirect\n        event.preventDefault();\n        onSuccessFunction();\n      },\n      onFailure: function(){\n        onFailureFunction();\n        return false;\n      },\n      fields: {\n        email: {\n          identifier  : 'email',\n          rules: [\n            {\n              type   : 'email',\n              prompt : 'Enter valid email address'\n            }\n          ]\n        },\n        password: {\n          identifier  : 'password',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter password'\n            }\n          ]\n        }\n      }\n    })\n  ;\n}\n","import ZwitscherService from '../../services/zwitscher-service';\nimport {inject} from 'aurelia-framework';\n\n@inject(ZwitscherService)\nexport class Logout {\n\n  constructor(zs) {\n    this.zwitscherService = zs;\n  }\n\n  logout() {\n    console.log('logging out');\n    this.zwitscherService.logout();\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {CompletedLoggedInUserUpdate, TweetUpdate} from '../../services/messages';\n\n@inject(ZwitscherService, EventAggregator)\nexport class PostTweet {\n\n  loggedInUser = {};\n  tweetMessage = '';\n  tweetImage = null;\n  errorMessage = {\n    'show': false,\n    'message': '',\n  };\n\n  eventSubscriptions = [];\n\n  constructor(zs,ea) {\n    this.zwitscherService = zs;\n    this.eventAgregator = ea;\n    this.loggedInUser = this.zwitscherService.getLoggedInUser();\n  }\n\n  attached() {\n    this.eventSubscriptions = [];\n    this.eventSubscriptions.push (this.eventAgregator.subscribe(CompletedLoggedInUserUpdate, msg => {\n      this.loggedInUser = this.zwitscherService.getLoggedInUser();\n    }));\n    initilizeUploadForm();\n    initializeFormValidation(this.postTweet.bind(this), this.reinitializeUploadForm.bind(this));\n  }\n\n  detached() {\n    this.eventSubscriptions.forEach(event => {\n      event.dispose();\n    })\n  }\n\n  postTweet() {\n    let tweet = {\n      message: this.tweetMessage,\n    };\n\n    if (this.tweetImage && this.tweetImage.length > 0) {\n      if (this.tweetImage[0].size > 1000000) {\n        this.errorMessage.show = true;\n        this.errorMessage.message = 'File size must be less than 1MB';\n        this.reinitializeUploadForm();\n      } else {\n        getBase64(this.tweetImage[0]).then(base64EncodedImage => {\n          tweet.image = base64EncodedImage;\n          this.zwitscherService.postTweet(tweet).then(postedTweet => {\n            console.log('tweet posted');\n            //https://github.com/aurelia/router/issues/201\n            // this.router.navigateToRoute('reload');\n            this.eventAgregator.publish(new TweetUpdate({}));\n            this.reinitializeUploadForm();\n          }).catch(err => {\n            console.log('tweet could not be posted');\n          })\n        }).catch(err => {\n          console.log('error encoding image');\n        });\n      }\n    } else {\n      this.zwitscherService.postTweet(tweet).then(postedTweet => {\n        this.eventAgregator.publish(new TweetUpdate({}));\n        this.reinitializeUploadForm();\n      }).catch(err => {\n        console.log('tweet could not be posted');\n      })\n    }\n  }\n\n  hideErrorMessage() {\n    this.errorMessage.show = false;\n    this.errorMessage.message = '';\n  }\n\n  reinitializeUploadForm() {\n    $('#tweetForm').removeClass('loading disabled');\n    $('#tweetForm #imagePreview').attr('src', null);\n    $('#imageSegment').attr('style', 'display: none');\n    this.tweetImage = null;\n    this.tweetMessage = '';\n  }\n}\n\nfunction getBase64(file) {\n  return new Promise((resolve, reject) => {\n    let reader = new FileReader();\n    reader.onload = readerEvent => {\n      const binaryString = readerEvent.target.result;\n      const base64String = btoa(binaryString);\n      resolve(base64String);\n    };\n    reader.onerror = error => {\n      reject(null);\n    };\n    reader.readAsBinaryString(file);\n  });\n}\n\nfunction initializeFormValidation(onSuccessFunction, onFailureFunction) {\n  $('#tweetForm')\n    .form({\n      on: 'submit',\n      inline: true,\n      onSuccess: function(event){\n        //prevents redirect\n        event.preventDefault();\n        onSuccessFunction();\n      },\n      onFailure: function(){\n        onFailureFunction();\n        return false;\n      },\n      fields: {\n        tweetMessage: {\n          identifier  : 'tweetMessage',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'No message no tweet'\n            }\n          ]\n        }\n      }\n    })\n  ;\n}\n\nfunction initilizeUploadForm(){\n  $('#tweetForm #camerabutton')\n    .on('click', function (e) {\n      $('#tweetForm #fileInput', $(e.target).parents()).click();\n    });\n\n  $('#tweetForm #fileInput').on('change', function (input) {\n    var $preview = $('#tweetForm #imagePreview');\n    if (this.files && this.files[0]) {\n      var reader = new FileReader();\n      reader.onload = function (e) {\n        $('#tweetForm #imagePreview').attr('src', e.target.result);\n        $('#imageSegment').attr('style', 'display: block');\n      };\n\n      reader.readAsDataURL(this.files[0]);\n    } else {\n      $('#tweetForm #imagePreview').removeAttr('src');\n      $('#imageSegment').attr('style', 'display: none');\n    }\n  });\n\n  $('#tweetForm #imagePreview')\n    .on('click', function (e) {\n      var $control = $('#tweetForm #fileInput');\n      control.replaceWith($control.val('').clone(true));\n      $('#tweetForm #imagePreview').removeAttr('src');\n      $('#imageSegment').attr('style', 'display: none');\n    });\n\n  $('#tweetForm').on('submit', function () {\n    $('#tweetForm').addClass('loading disabled');\n  });\n}\n","export class Reload\n{\n  activate()\n  {\n    window.history.back();\n  }\n\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {inject} from 'aurelia-framework';\nimport {CompletedLoggedInUserUpdate, TriggerLoggedInUserUpdate} from '../../services/messages';\n\n@inject(EventAggregator, ZwitscherService)\nexport class Settings {\n\n  loggedInUser = {};\n\n  eventSubscriptions = [];\n\n  constructor(ea, zs) {\n    this.eventAgregator = ea;\n    this.zwitscherService = zs;\n  }\n\n  attached() {\n    this.eventSubscriptions = [];\n    this.eventSubscriptions.push (this.eventAgregator.subscribe(CompletedLoggedInUserUpdate, msg => {\n      this.refreshUser()\n    }));\n    this.refreshUser();\n    initializeFormValidation(this.update.bind(this), null);\n  }\n\n  detached() {\n    this.eventSubscriptions.forEach(event => {\n      event.dispose();\n    })\n  }\n\n  update() {\n    if (this.loggedInUser.password === '') {\n      this.loggedInUser.password = this.loggedInUser.oldPassword;\n    }\n\n    this.zwitscherService.updateUser(this.loggedInUser).then(updatedUser => {\n      //refreshes the token after user was updated\n      this.zwitscherService.reAuhtenticate(updatedUser.email, updatedUser.password);\n      this.eventAgregator.publish(new TriggerLoggedInUserUpdate({}));\n    }).catch(err => {\n      console.log('error updating user');\n      this.refreshUser();\n    });\n  }\n\n  refreshUser() {\n    this.loggedInUser = this.zwitscherService.getLoggedInUser();\n    this.loggedInUser.oldPassword = '';\n    this.loggedInUser.password = '';\n    this.loggedInUser.passwordConfirm = '';\n  }\n}\n\nfunction initializeFormValidation(onSuccessFunction, onFailureFunction) {\n  $('#settingsForm')\n    .form({\n      on: 'submit',\n      inline: true,\n      onSuccess: function(event){\n        //prevents redirect\n        event.preventDefault();\n        onSuccessFunction();\n      },\n      onFailure: function(){\n        onFailureFunction();\n        return false;\n      },\n      fields: {\n        firstName: {\n          identifier  : 'firstName',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter your first name'\n            }\n          ]\n        },\n        lastName: {\n          identifier  : 'lastName',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter your last name'\n            }\n          ]\n        },\n        gender: {\n          identifier  : 'gender',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Provide your gender'\n            }\n          ]\n        },\n        email: {\n          identifier  : 'email',\n          rules: [\n            {\n              type   : 'email',\n              prompt : 'Enter valid email address'\n            }\n          ]\n        },\n        oldPassword: {\n          identifier  : 'oldPassword',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter old password'\n            }\n          ]\n        },\n        password: {\n          identifier  : 'password',\n          optional: true,\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter password'\n            },\n            {\n              type   : 'minLength[6]',\n              prompt : 'Password must be 6 or more characters'\n            }\n          ]\n        },\n        passwordConfirm: {\n          identifier  : 'passwordConfirm',\n          optional: true,\n          rules: [\n            {\n              type   : 'match[password]',\n              prompt : 'Passwords do not match'\n            }\n          ]\n        }\n      }\n    })\n  ;\n}\n","import {EventAggregator} from 'aurelia-event-aggregator';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {inject} from 'aurelia-framework';\nimport {LoginStatus} from '../../services/messages';\n\n@inject(EventAggregator, ZwitscherService)\nexport class Signup {\n\n  firstName = '';\n  lastName = '';\n  email = '';\n  password = '';\n  gender = 'M';\n\n  constructor(ea, zs) {\n    this.ea = ea;\n    this.zwitscherService = zs;\n  }\n\n  attached() {\n    initializeFormValidation(this.register.bind(this), null);\n\n    $('#signupForm').on('submit', function () {\n      $('#signupForm').addClass('loading disabled');\n    });\n  }\n\n  register() {\n\n    this.zwitscherService.register(this.firstName, this.lastName, this.email, this.password, this.gender).then(newUser => {\n      this.zwitscherService.login(this.email, this.password);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n}\n\nfunction initializeFormValidation(onSuccessFunction, onFailureFunction) {\n  $('#signupForm')\n    .form({\n      on: 'submit',\n      inline: true,\n      onSuccess: function(event){\n        //prevents redirect\n        event.preventDefault();\n        onSuccessFunction();\n      },\n      onFailure: function(){\n        onFailureFunction();\n        return false;\n      },\n      fields: {\n        firstName: {\n          identifier  : 'firstName',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter your first name'\n            }\n          ]\n        },\n        lastName: {\n          identifier  : 'lastName',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter your last name'\n            }\n          ]\n        },\n        gender: {\n          identifier  : 'gender',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Provide your gender'\n            }\n          ]\n        },\n        email: {\n          identifier  : 'email',\n          rules: [\n            {\n              type   : 'email',\n              prompt : 'Enter valid email address'\n            }\n          ]\n        },\n        password: {\n          identifier  : 'password',\n          rules: [\n            {\n              type   : 'empty',\n              prompt : 'Enter password'\n            },\n            {\n              type   : 'minLength[6]',\n              prompt : 'Password must be 6 or more characters'\n            }\n          ]\n        },\n        passwordConfirm: {\n          identifier  : 'passwordConfirm',\n          rules: [\n            {\n              type   : 'match[password]',\n              prompt : 'Passwords do not match'\n            }\n          ]\n        }\n      }\n    })\n  ;\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {CompletedLoggedInUserUpdate} from '../../services/messages';\nimport * as d3 from \"d3\";\n\n@inject(ZwitscherService, EventAggregator, d3)\nexport class SocialGraph {\n\n  eventSubscriptions = [];\n\n  constructor(zs, ea) {\n    this.zwitscherService = zs;\n    this.eventAgregator = ea;\n    this.graph = {\n      \"nodes\": [],\n      \"links\": []\n    };\n  }\n\n  attached() {\n    this.eventSubscriptions.push (this.eventAgregator.subscribe(CompletedLoggedInUserUpdate, msg => {\n      this.refresh();\n    }));\n    this.refresh();\n  }\n\n  detached() {\n    this.eventSubscriptions.forEach(event => {\n      event.dispose();\n    })\n  }\n\n  refresh() {\n    d3.select('svg').remove();\n\n    this.graph = {\n      \"nodes\": [],\n      \"links\": []\n    };\n\n    this.zwitscherService.getUsers().then(users => {\n      users.forEach(user => {\n        this.graph.nodes.push({\n          'id': user._id,\n          'name': user.firstName,\n          'group': user.gender,\n          'profilePicture': user.profilePicture\n        });\n\n        user.follows.forEach(followedUser => {\n          this.graph.links.push({\n            'source': user._id,\n            'target': followedUser._id,\n            'value': 50\n          });\n        });\n      });\n\n      this.initializeGraph();\n\n    }).catch(err => {\n      console.log(err);\n    })\n  }\n\n  initializeGraph() {\n    let width = 960, height = 500;\n\n    // let width = $('#graphContainer').width();\n    // if (width < 500) {\n    //   width = 500;\n    // }\n    //\n    // let height = width / 2;\n    // if (height < 500) {\n    //   height = 500;\n    // }\n\n    let svg = d3.select('#graph')\n      .append('svg')\n      .attr('width', width)\n      .attr('height', height);\n\n    var simulation = d3.forceSimulation()\n      .force(\"link\", d3.forceLink().id(function(d) { return d.id; }))\n      .force(\"charge\", d3.forceManyBody())\n      .force(\"collide\", d3.forceCollide(100))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2));\n\n    var link = svg.append(\"g\")\n      .attr(\"class\", \"links\")\n      .selectAll(\"line\")\n      .data(this.graph.links)\n      .enter().append(\"line\")\n      .attr(\"stroke-width\", function(d) { return Math.sqrt(d.value); })\n      .attr('marker-end', 'url(#end)')\n      .style(\"fill\", \"lightgray\");\n\n    // // build the arrow.\n    // svg.append(\"svg:defs\").selectAll(\"marker\")\n    //   .data([\"end\"])      // Different link/path types can be defined here\n    //   .enter().append(\"svg:marker\")    // This section adds in the arrows\n    //   .attr(\"id\", String)\n    //   .attr(\"viewBox\", \"0 -5 10 10\")\n    //   .attr(\"refX\", 22)\n    //   .attr(\"refY\", 0)\n    //   .attr(\"markerWidth\", 4)\n    //   .attr(\"markerHeight\", 4)\n    //   .attr(\"orient\", \"auto\")\n    //   .append(\"svg:path\")\n    //   .attr(\"d\", \"M0,-5L10,0L0,5\")\n    //   .style(\"fill\", \"lightgray\");\n\n    let gnodes = svg.selectAll('g.gnode')\n      .data(this.graph.nodes)\n      .enter()\n      .append('g')\n      .classed('gnode', true);\n\n    gnodes.append(\"image\")\n      .attr(\"xlink:href\", function(d)\n      {\n        return d.profilePicture;\n      })\n      .attr(\"x\", -50)\n      .attr(\"y\", -50)\n      .attr(\"width\", 100)\n      .attr(\"height\", 100)\n      .call(d3.drag()\n        .on(\"start\", dragstarted)\n        .on(\"drag\", dragged)\n        .on(\"end\", dragended));\n\n    let labels = gnodes.append(\"text\")\n      .text(function(d) { return d.name; })\n      .attr(\"x\", 50)\n      .attr(\"y\", 25)\n      .style('fill', '1b1c1d')\n      .style('font-weight', 'bold')\n      .style('font-size', '25px');\n\n    simulation\n      .nodes(this.graph.nodes)\n      .on(\"tick\", ticked);\n\n    simulation.force(\"link\")\n      .links(this.graph.links);\n\n    function ticked() {\n      link\n        .attr(\"x1\", function(d) { return d.source.x; })\n        .attr(\"y1\", function(d) { return d.source.y; })\n        .attr(\"x2\", function(d) { return d.target.x; })\n        .attr(\"y2\", function(d) { return d.target.y; });\n\n      gnodes\n        .attr(\"cx\", function(d) { return d.x; })\n        .attr(\"cy\", function(d) { return d.y; })\n        .attr(\"transform\", function(d) {\n          return 'translate(' + [d.x, d.y] + ')';\n        });\n    }\n\n    function dragstarted(d) {\n      if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n      d.fx = d.x;\n      d.fy = d.y;\n    }\n\n    function dragged(d) {\n      d.fx = d3.event.x;\n      d.fy = d3.event.y;\n    }\n\n    function dragended(d) {\n      if (!d3.event.active) simulation.alphaTarget(0);\n      d.fx = null;\n      d.fy = null;\n    }\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {TweetUpdate, CompletedLoggedInUserUpdate} from '../../services/messages';\n\n@inject(ZwitscherService, EventAggregator)\nexport class Timeline {\n\n  tweets = [];\n  src = '';\n  loggedInUser = {};\n  timelineUser = {};\n  timelineUserID = '';\n  bulkDeleteActive = false;\n\n  eventSubscriptions = [];\n\n  constructor(zs, ea) {\n    this.zwitscherService = zs\n    this.eventAgregator = ea;\n    this.loggedInUser = this.zwitscherService.getLoggedInUser();\n  }\n\n  activate(timelineOptions) {\n    console.log(timelineOptions);\n    this.timelineUserID = timelineOptions.viewedUserID;\n    this.src = timelineOptions.src;\n    this.zwitscherService.getUser(timelineOptions.viewedUserID).then(foundUser => {\n      this.timelineUser = foundUser;\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  attached() {\n    this.eventSubscriptions = [];\n    this.eventSubscriptions.push (this.eventAgregator.subscribe(TweetUpdate, msg => {\n      this.refreshTimeline();\n    }));\n    this.eventSubscriptions.push (this.eventAgregator.subscribe(CompletedLoggedInUserUpdate, msg => {\n      this.refreshTimeline();\n      if (this.timelineUserID === this.loggedInUser._id){\n        this.loggedInUser = this.zwitscherService.getLoggedInUser();\n        this.timelineUser = this.zwitscherService.getLoggedInUser();\n      }\n    }));\n\n    this.refreshTimeline();\n  }\n\n  detached() {\n    this.eventSubscriptions.forEach(event => {\n      event.dispose();\n    })\n  }\n\n  deleteTweet(tweetToDeleteID) {\n    this.zwitscherService.deleteTweet(tweetToDeleteID).then(result => {\n      const indexToRemove = this.tweets.findIndex(tweet => {\n        return tweet._id === tweetToDeleteID;\n      });\n\n      if (indexToRemove > -1) {\n        this.tweets.splice(indexToRemove, 1);\n        this.eventAgregator.publish(new TweetUpdate({}));\n        console.log('tweet deleted successfully');\n      }\n    }).catch(err => {\n      console.log('tweet could not be deleted');\n    })\n  }\n\n  deleteMultipleTweets() {\n    let tweetsToDelete = [];\n    this.tweets.forEach(tweet => {\n      if(tweet.checkedForDelete) {\n        tweetsToDelete.push(tweet._id);\n      }\n    });\n\n    if (tweetsToDelete.length > 0) {\n      this.zwitscherService.deleteMultipleTweets(tweetsToDelete).then(result => {\n        this.eventAgregator.publish(new TweetUpdate({}));\n      }).catch(err => {\n        console.log(err);\n      })\n    }\n\n    this.showOrHideEditItems();\n  }\n\n  deleteAllUserTweets(userID) {\n    let tweetsToDelete = [];\n    this.tweets.forEach(tweet => {\n      if(tweet.user._id === userID) {\n        tweetsToDelete.push(tweet._id);\n      }\n    });\n\n    if (tweetsToDelete.length > 0) {\n      this.zwitscherService.deleteMultipleTweets(tweetsToDelete).then(result => {\n        this.eventAgregator.publish(new TweetUpdate({}));\n      }).catch(err => {\n        console.log(err);\n      })\n    }\n  }\n\n  refreshTimeline(){\n    this.tweets = [];\n\n    // let getTweets;\n    let getTweetFunctionName = '';\n    if (this.src === 'globalTimeline'){\n      // getTweets = this.zwitscherService.getTweetsForUser;\n      getTweetFunctionName = 'getTweetsForUser';\n    } else {\n      // getTweets = this.zwitscherService.getTweetsByUser;\n      getTweetFunctionName = 'getTweetsByUser';\n    }\n\n    this.zwitscherService[getTweetFunctionName](this.timelineUserID).then(tweets => {\n\n      tweets.sort((tweet1, tweet2) => {\n        const posted1 = new Date(tweet1.posted);\n        const posted2 = new Date(tweet2.posted);\n\n        return posted2.getTime() - posted1.getTime();\n      });\n\n      tweets.forEach(tweet => {\n        tweet.checkedForDelete = false;\n        tweet.postedString = new Date(tweet.posted).toLocaleString('en-GB');\n        tweet.canDelete = (tweet.user !== null && this.loggedInUser._id === tweet.user._id) || this.loggedInUser.scope === 'admin';\n        this.tweets.push(tweet);\n      });\n\n      console.log(this.tweets);\n    });\n  }\n\n  showOrHideEditItems(){\n    this.tweets.forEach(tweet => {\n      tweet.checkedForDelete = false;\n    });\n\n    this.bulkDeleteActive = !this.bulkDeleteActive;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {TweetUpdate, TriggerLoggedInUserUpdate, CompletedLoggedInUserUpdate, UsersChanged} from '../../services/messages';\nimport {Router} from 'aurelia-router';\n\n@inject(ZwitscherService, EventAggregator, Router)\nexport class User {\n\n  loggedInUser = {};\n  viewedUserID = '';\n  viewedUser = {};\n\n  eventSubscriptions = [];\n\n  constructor(zs,ea,router) {\n    this.zwitscherService = zs;\n    this.eventAgregator = ea;\n    this.router = router;\n    this.loggedInUser = this.zwitscherService.getLoggedInUser();\n  }\n\n  attached() {\n    this.eventSubscriptions = [];\n    this.eventSubscriptions.push (this.eventAgregator.subscribe(TweetUpdate, msg => {\n      this.refreshUser();\n    }));\n\n    this.eventSubscriptions.push(this.eventAgregator.subscribe(CompletedLoggedInUserUpdate, msg => {\n      this.refreshUser();\n    }));\n\n    this.eventSubscriptions.push (this.eventAgregator.subscribe(UsersChanged, msg => {\n      if(msg.status.removedID === this.viewedUser._id) {\n        this.router.navigateToRoute('users');\n      }\n    }));\n  }\n\n  detached() {\n    this.eventSubscriptions.forEach(event => {\n      event.dispose();\n    })\n  }\n\n  activate(userID) {\n    console.log(userID);\n    this.viewedUserID = userID;\n    this.refreshUser();\n  }\n\n  followUser(userID) {\n    this.zwitscherService.followUser(userID).then(result => {\n      const indexToRemove = this.loggedInUser.follows.indexOf(userID);\n      if (indexToRemove === -1) {\n        this.loggedInUser.follows.push(userID);\n      }\n      this.eventAgregator.publish(new TriggerLoggedInUserUpdate({}));\n    }).catch(err => {\n      console.log('error trying to follow user');\n    })\n  }\n\n  unfollowUser(userID) {\n    this.zwitscherService.unfollowUser(userID).then(result => {\n        const indexToRemove = this.loggedInUser.follows.indexOf(userID);\n        if (indexToRemove !== -1) {\n          this.loggedInUser.follows.splice(indexToRemove, 1);\n        }\n      this.eventAgregator.publish(new TriggerLoggedInUserUpdate({}));\n      }\n    ).catch(err => {\n      console.log('error trying to unfollow user');\n    })\n\n  }\n\n  removeUser(userID) {\n    this.zwitscherService.removeUser(userID).then(result => {\n      //   const indexToRemove = this.loggedInUser.follows.indexOf(userID);\n      //   if (indexToRemove !== -1) {\n      //     this.loggedInUser.follows.splice(indexToRemove, 1);\n      //   }\n      // this.refreshUser();\n      // this.eventAgregator.publish(new LoggedInUserUpdate({}));\n\n      //https://github.com/aurelia/router/issues/201\n      // this.router.navigateToRoute('reload');\n\n        this.eventAgregator.publish(new UsersChanged({ removedID: userID }));\n      }\n    ).catch(err => {\n      console.log('error trying to remove user');\n    })\n  }\n\n  refreshUser(){\n    this.zwitscherService.getUser(this.viewedUserID).then(foundUser => {\n      this.viewedUser = foundUser;\n      this.viewedUser.joinedString = new Date(this.viewedUser.joined).getFullYear();\n      this.viewedUser.canFollow = this.loggedInUser._id !== this.viewedUserID;\n\n      //check if loggedInUser is following current user\n      var indexOfFollowing = this.loggedInUser.follows.findIndex(followedUserID => {\n        return this.viewedUser._id === followedUserID;\n      });\n      this.viewedUser.isFollowing = indexOfFollowing !== -1;\n\n      //check if user can be deleted (admin function)\n      let canDelete = false;\n      if (this.loggedInUser._id !== this.viewedUserID &&\n          this.loggedInUser.scope === 'admin') {\n        canDelete = true;\n      }\n      this.viewedUser.canDelete = canDelete;\n\n      console.log(foundUser);\n    }).catch(err => {\n      console.log('viewedUser not found');\n      console.log(err);\n    });\n  }\n\n  goToTimeline(userID){\n    this.router.navigateToRoute('userTimeline', { id: userID });\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {TweetUpdate} from '../../services/messages';\n\n@inject(ZwitscherService, EventAggregator)\nexport class UserTimeline {\n\n  timelineOptions = {};\n\n  constructor(zs, ea) {\n    this.zwitscherService = zs\n    this.eventAgregator = ea;\n\n    this.timelineOptions.src = 'userTimeline';\n  }\n\n  activate(payload) {\n    if (payload && payload.id) {\n      this.timelineOptions.viewedUserID = payload.id;\n    } else {\n      this.timelineOptions.viewedUserID = this.zwitscherService.loggedInUser._id;\n    }\n\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport ZwitscherService from '../../services/zwitscher-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {UsersChanged} from '../../services/messages';\n\n@inject(ZwitscherService, EventAggregator)\nexport class GlobalTimeline {\n\n  users = [];\n  loggedInUser = {};\n  eventSubscriptions = [];\n\n  constructor(zs, ea) {\n    this.zwitscherService = zs\n    this.eventAgregator = ea;\n    this.loggedInUser = this.zwitscherService.loggedInUser;\n  }\n\n  attached() {\n    this.eventSubscriptions = [];\n    this.eventSubscriptions.push(this.eventAgregator.subscribe(UsersChanged, msg => {\n      this.refreshUsers();\n    }));\n    this.refreshUsers();\n  }\n\n  detached() {\n    this.eventSubscriptions.forEach(event => {\n      event.dispose();\n    })\n  }\n\n  refreshUsers(){\n    this.zwitscherService.getUsers().then(foundUsers => {\n      this.users = foundUsers;\n    }).catch(err => {\n      console.log('error while searching for users');\n    })\n  }\n}\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"sourceRoot":"../src"}